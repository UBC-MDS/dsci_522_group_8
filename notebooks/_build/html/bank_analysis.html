

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Bank Marketing Analysis &#8212; Bank Marketing Analysis</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'bank_analysis';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
  
    <p class="title logo__title">Bank Marketing Analysis</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1 current active">
                <a class="reference internal" href="#">
                    <center> Bank Marketing Analysis </center>
                </a>
            </li>
        </ul>
        
    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/bank_analysis.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1><center> Bank Marketing Analysis </center></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><center> Bank Marketing Analysis </center></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-summary-center"><center> Summary </center></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-introduction-center"><center> Introduction </center></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#background">Background</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#research-question">Research Question</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-description">Data Description</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-methods-center"><center>Methods </center></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-results-and-discussion-center"><center>Results and Discussion </center></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocessing">Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-selection">Model Selection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hyperparameter-optimization">Hyperparameter Optimization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-results-after-hyperparameter-optimization">Test results after hyperparameter optimization</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-discussions-center"><center> Discussions </center></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-findings">Key Findings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection-on-expectations">Reflection on Expectations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#impact-of-finding">Impact of Finding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#future-improvements">Future Improvements</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-references-center"><center> References </center></a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="center-bank-marketing-analysis-center">
<h1><center> Bank Marketing Analysis </center><a class="headerlink" href="#center-bank-marketing-analysis-center" title="Permalink to this heading">#</a></h1>
<center>by Runtian Li, Rafe Chang, Sid Grover, Anu Banga </center><p><strong>Repo Link:</strong> <a class="github reference external" href="https://github.com/UBC-MDS/dsci_522_group_8.git">UBC-MDS/dsci_522_group_8.git</a></p>
<div class="cell tag_remove-input docutils container">
</div>
</section>
<section id="center-summary-center">
<h1><center> Summary </center><a class="headerlink" href="#center-summary-center" title="Permalink to this heading">#</a></h1>
<p>Here we build a model of balanced SVC to try to predict if a new client will subscribe to a term deposit. We tested five different classification models, including dummy classifier, unbalanced/balanced logistic regression, and unbalanced/balanced SVC, and chose the optimal model of balanced SVC based on how the model scored on the test data; the model has the highest test recall score of 0.82, which indicates that the model makes the least false negative predictions among all five models.</p>
<p>The balanced support vector machines model considers 13 different numerical/ categorical features of customers. After hyperparameter optimization, the model’s test accuracy increased from 0.82 to 0.875. The results were somewhat expected, given SVC’s known efficacy in classification tasks, particularly when there’s a clear margin of separation. The high recall score of 0.875 indicates that the model is particularly adept at identifying clients likely to subscribe, which was the primary goal. It’s noteworthy that such a high recall was achieved, as it suggests the model is highly sensitive to true positive cases.</p>
</section>
<section id="center-introduction-center">
<h1><center> Introduction </center><a class="headerlink" href="#center-introduction-center" title="Permalink to this heading">#</a></h1>
<section id="background">
<h2>Background<a class="headerlink" href="#background" title="Permalink to this heading">#</a></h2>
<p>The data set Bank Marketing was created by Sérgio Moro and Paulo Rita at the University Institute of Lisbon, and Paulo Cortez at the University of Minhom. It is sourced from the UCI Machine Learning Repository. Each row in this data set is an observation related to direct marketing campaigns (phone calls) of a Portuguese banking institution.</p>
</section>
<section id="research-question">
<h2>Research Question<a class="headerlink" href="#research-question" title="Permalink to this heading">#</a></h2>
<p>We are working on a binary classification model. The classification goal is to predict if the client will subscribe a term deposit: “yes” for will subscribe and “no” for won’t subscribe.</p>
</section>
<section id="data-description">
<h2>Data Description<a class="headerlink" href="#data-description" title="Permalink to this heading">#</a></h2>
<p>The data is related with direct marketing campaigns of a Portuguese banking institution. The marketing campaigns were based on phone calls. Often, more than one contact to the same client was required, in order to access if the product (bank term deposit) would be (‘yes’) or not (‘no’) subscribed. It was sourced from the UCI Machine Learning Repository and can be found <a class="reference external" href="https://archive.ics.uci.edu/dataset/222/bank+marketing">here</a>. We will be using bank-full.csv with all examples and 17 inputs, ordered by date (older version of this dataset with less inputs).</p>
<p>These are the detail of all inputs:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Feature Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Classes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>age</p></td>
<td><p>Numeric</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>job</p></td>
<td><p>Categorical</p></td>
<td><p>Type of job</p></td>
<td><p>‘admin.’,’blue-collar’,’entrepreneur’,’housemaid’,’management’,’retired’,’self-employed’,’services’,’student’,’technician’,’unemployed’,’unknown’</p></td>
</tr>
<tr class="row-even"><td><p>marital</p></td>
<td><p>Categorical</p></td>
<td><p>Marital status</p></td>
<td><p>‘divorced’,’married’,’single’,’unknown’</p></td>
</tr>
<tr class="row-odd"><td><p>education</p></td>
<td><p>Categorical</p></td>
<td><p></p></td>
<td><p>‘primary’, ‘secondary’, ‘tertiary’, ‘unknown’</p></td>
</tr>
<tr class="row-even"><td><p>default</p></td>
<td><p>Categorical</p></td>
<td><p>Has credit in default?</p></td>
<td><p>‘no’, ‘yes’, ‘unknown’</p></td>
</tr>
<tr class="row-odd"><td><p>housing</p></td>
<td><p>Categorical</p></td>
<td><p>Has housing loan?</p></td>
<td><p>‘no’, ‘yes’, ‘unknown’</p></td>
</tr>
<tr class="row-even"><td><p>loan</p></td>
<td><p>Categorical</p></td>
<td><p>Has personal loan?</p></td>
<td><p>‘no’, ‘yes’, ‘unknown’</p></td>
</tr>
<tr class="row-odd"><td><p>balance</p></td>
<td><p>Numeric</p></td>
<td><p>Balance of the individual</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>contact</p></td>
<td><p>Categorical</p></td>
<td><p>Contact communication type</p></td>
<td><p>‘cellular’, ‘telephone’</p></td>
</tr>
<tr class="row-odd"><td><p>month</p></td>
<td><p>Categorical</p></td>
<td><p>Last contact month of year</p></td>
<td><p>‘jan’, ‘feb’, ‘mar’, …, ‘nov’, ‘dec’</p></td>
</tr>
<tr class="row-even"><td><p>day</p></td>
<td><p>Categorical</p></td>
<td><p>Last contact day of the week</p></td>
<td><p>‘mon’, ‘tue’, ‘wed’, ‘thu’, ‘fri’</p></td>
</tr>
<tr class="row-odd"><td><p>duration</p></td>
<td><p>Numeric</p></td>
<td><p>Last contact duration, in seconds</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>campaign</p></td>
<td><p>Numeric</p></td>
<td><p>Number of contacts performed during this campaign and for this client</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>pdays</p></td>
<td><p>Numeric</p></td>
<td><p>Number of days that passed by after the client was last contacted from a previous campaign</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>previous</p></td>
<td><p>Numeric</p></td>
<td><p>Number of contacts performed before this campaign and for this client</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>poutcome</p></td>
<td><p>Categorical</p></td>
<td><p>Outcome of the previous marketing campaign</p></td>
<td><p>‘failure’, ‘nonexistent’, ‘success’</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>Binary</p></td>
<td><p>Has the client subscribed to a term deposit?</p></td>
<td><p>‘yes’, ‘no’</p></td>
</tr>
</tbody>
</table>
<p>The classification goal is to predict if the client will subscribe (yes/no) a term deposit (variable y).</p>
</section>
</section>
<section id="center-methods-center">
<h1><center>Methods </center><a class="headerlink" href="#center-methods-center" title="Permalink to this heading">#</a></h1>
<p>TBD</p>
</section>
<section id="center-results-and-discussion-center">
<h1><center>Results and Discussion </center><a class="headerlink" href="#center-results-and-discussion-center" title="Permalink to this heading">#</a></h1>
<section id="exploratory-data-analysis">
<h2>Exploratory Data Analysis<a class="headerlink" href="#exploratory-data-analysis" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">src.uniques</span> <span class="kn">import</span> <span class="n">get_uniques</span>
<span class="n">get_uniques</span><span class="p">(</span><span class="n">df</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="kn">from</span> <span class="nn">src.uniques</span> <span class="kn">import</span> <span class="n">get_uniques</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">get_uniques</span><span class="p">(</span><span class="n">df</span><span class="p">);</span>

<span class="ne">NameError</span>: name &#39;sys&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the eda_plotting functions function from the src folder</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">src.eda_plotting</span> <span class="kn">import</span> <span class="p">(</span>
                                <span class="n">EDA_plot</span><span class="p">,</span> 
                                <span class="n">spearman_correlation_matrix</span><span class="p">,</span> 
                                <span class="n">text_EDA</span>
                             <span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">text_EDA</span><span class="p">(</span><span class="n">train_df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>DataFrame Information:
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Index: 36168 entries, 28686 to 15725
Data columns (total 17 columns):
 #   Column     Non-Null Count  Dtype 
---  ------     --------------  ----- 
 0   age        36168 non-null  int64 
 1   job        36168 non-null  object
 2   marital    36168 non-null  object
 3   education  36168 non-null  object
 4   default    36168 non-null  object
 5   balance    36168 non-null  int64 
 6   housing    36168 non-null  object
 7   loan       36168 non-null  object
 8   contact    36168 non-null  object
 9   day        36168 non-null  int64 
 10  month      36168 non-null  object
 11  duration   36168 non-null  int64 
 12  campaign   36168 non-null  int64 
 13  pdays      36168 non-null  int64 
 14  previous   36168 non-null  int64 
 15  poutcome   36168 non-null  object
 16  target     36168 non-null  object
dtypes: int64(7), object(10)
memory usage: 5.0+ MB
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Descriptive Statistics:
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>count</th>
      <th>mean</th>
      <th>std</th>
      <th>min</th>
      <th>25%</th>
      <th>50%</th>
      <th>75%</th>
      <th>max</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>age</th>
      <td>36168.0</td>
      <td>40.944979</td>
      <td>10.609908</td>
      <td>18.0</td>
      <td>33.0</td>
      <td>39.0</td>
      <td>48.00</td>
      <td>95.0</td>
    </tr>
    <tr>
      <th>balance</th>
      <td>36168.0</td>
      <td>1371.354208</td>
      <td>2999.155128</td>
      <td>-8019.0</td>
      <td>73.0</td>
      <td>448.5</td>
      <td>1448.00</td>
      <td>98417.0</td>
    </tr>
    <tr>
      <th>day</th>
      <td>36168.0</td>
      <td>15.801095</td>
      <td>8.309679</td>
      <td>1.0</td>
      <td>8.0</td>
      <td>16.0</td>
      <td>21.00</td>
      <td>31.0</td>
    </tr>
    <tr>
      <th>duration</th>
      <td>36168.0</td>
      <td>258.955403</td>
      <td>259.218884</td>
      <td>0.0</td>
      <td>103.0</td>
      <td>180.0</td>
      <td>319.25</td>
      <td>4918.0</td>
    </tr>
    <tr>
      <th>campaign</th>
      <td>36168.0</td>
      <td>2.759013</td>
      <td>3.095290</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>3.00</td>
      <td>58.0</td>
    </tr>
    <tr>
      <th>pdays</th>
      <td>36168.0</td>
      <td>40.199762</td>
      <td>100.114274</td>
      <td>-1.0</td>
      <td>-1.0</td>
      <td>-1.0</td>
      <td>-1.00</td>
      <td>871.0</td>
    </tr>
    <tr>
      <th>previous</th>
      <td>36168.0</td>
      <td>0.580596</td>
      <td>2.364362</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>275.0</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>First 5 Rows:
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>job</th>
      <th>marital</th>
      <th>education</th>
      <th>default</th>
      <th>balance</th>
      <th>housing</th>
      <th>loan</th>
      <th>contact</th>
      <th>day</th>
      <th>month</th>
      <th>duration</th>
      <th>campaign</th>
      <th>pdays</th>
      <th>previous</th>
      <th>poutcome</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>28686</th>
      <td>29</td>
      <td>services</td>
      <td>single</td>
      <td>secondary</td>
      <td>no</td>
      <td>-205</td>
      <td>no</td>
      <td>no</td>
      <td>cellular</td>
      <td>30</td>
      <td>jan</td>
      <td>194</td>
      <td>1</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
    <tr>
      <th>9304</th>
      <td>53</td>
      <td>blue-collar</td>
      <td>married</td>
      <td>primary</td>
      <td>no</td>
      <td>0</td>
      <td>yes</td>
      <td>no</td>
      <td>unknown</td>
      <td>5</td>
      <td>jun</td>
      <td>285</td>
      <td>2</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
    <tr>
      <th>41425</th>
      <td>55</td>
      <td>management</td>
      <td>married</td>
      <td>primary</td>
      <td>no</td>
      <td>2587</td>
      <td>no</td>
      <td>no</td>
      <td>cellular</td>
      <td>4</td>
      <td>sep</td>
      <td>328</td>
      <td>2</td>
      <td>94</td>
      <td>2</td>
      <td>success</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>44803</th>
      <td>30</td>
      <td>technician</td>
      <td>single</td>
      <td>tertiary</td>
      <td>no</td>
      <td>0</td>
      <td>no</td>
      <td>no</td>
      <td>cellular</td>
      <td>15</td>
      <td>sep</td>
      <td>214</td>
      <td>2</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
    <tr>
      <th>5878</th>
      <td>30</td>
      <td>unemployed</td>
      <td>married</td>
      <td>secondary</td>
      <td>no</td>
      <td>529</td>
      <td>yes</td>
      <td>yes</td>
      <td>unknown</td>
      <td>26</td>
      <td>may</td>
      <td>107</td>
      <td>3</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Last 5 Rows:
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>age</th>
      <th>job</th>
      <th>marital</th>
      <th>education</th>
      <th>default</th>
      <th>balance</th>
      <th>housing</th>
      <th>loan</th>
      <th>contact</th>
      <th>day</th>
      <th>month</th>
      <th>duration</th>
      <th>campaign</th>
      <th>pdays</th>
      <th>previous</th>
      <th>poutcome</th>
      <th>target</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7763</th>
      <td>50</td>
      <td>unemployed</td>
      <td>married</td>
      <td>secondary</td>
      <td>no</td>
      <td>3674</td>
      <td>yes</td>
      <td>no</td>
      <td>unknown</td>
      <td>30</td>
      <td>may</td>
      <td>886</td>
      <td>3</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>yes</td>
    </tr>
    <tr>
      <th>15377</th>
      <td>36</td>
      <td>management</td>
      <td>married</td>
      <td>tertiary</td>
      <td>no</td>
      <td>635</td>
      <td>yes</td>
      <td>no</td>
      <td>cellular</td>
      <td>18</td>
      <td>jul</td>
      <td>359</td>
      <td>1</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
    <tr>
      <th>17730</th>
      <td>43</td>
      <td>blue-collar</td>
      <td>married</td>
      <td>primary</td>
      <td>no</td>
      <td>3664</td>
      <td>no</td>
      <td>no</td>
      <td>telephone</td>
      <td>29</td>
      <td>jul</td>
      <td>274</td>
      <td>1</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
    <tr>
      <th>28030</th>
      <td>55</td>
      <td>unemployed</td>
      <td>married</td>
      <td>primary</td>
      <td>no</td>
      <td>8585</td>
      <td>no</td>
      <td>no</td>
      <td>telephone</td>
      <td>28</td>
      <td>jan</td>
      <td>201</td>
      <td>2</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
    <tr>
      <th>15725</th>
      <td>46</td>
      <td>management</td>
      <td>single</td>
      <td>tertiary</td>
      <td>no</td>
      <td>2154</td>
      <td>yes</td>
      <td>no</td>
      <td>cellular</td>
      <td>21</td>
      <td>jul</td>
      <td>87</td>
      <td>4</td>
      <td>-1</td>
      <td>0</td>
      <td>unknown</td>
      <td>no</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">spearman_correlation_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numerical_cols</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_92fb8_row0_col0, #T_92fb8_row1_col1, #T_92fb8_row2_col2, #T_92fb8_row3_col3, #T_92fb8_row4_col4, #T_92fb8_row5_col5, #T_92fb8_row6_col6 {
  background-color: #023858;
  color: #f1f1f1;
}
#T_92fb8_row0_col1, #T_92fb8_row5_col3 {
  background-color: #ede7f2;
  color: #000000;
}
#T_92fb8_row0_col2 {
  background-color: #f4edf6;
  color: #000000;
}
#T_92fb8_row0_col3, #T_92fb8_row4_col0 {
  background-color: #f5eef6;
  color: #000000;
}
#T_92fb8_row0_col4, #T_92fb8_row1_col3 {
  background-color: #eae6f1;
  color: #000000;
}
#T_92fb8_row0_col5, #T_92fb8_row0_col6, #T_92fb8_row1_col2 {
  background-color: #f2ecf5;
  color: #000000;
}
#T_92fb8_row1_col0, #T_92fb8_row3_col5, #T_92fb8_row3_col6, #T_92fb8_row6_col3 {
  background-color: #ece7f2;
  color: #000000;
}
#T_92fb8_row1_col4, #T_92fb8_row3_col1 {
  background-color: #f4eef6;
  color: #000000;
}
#T_92fb8_row1_col5 {
  background-color: #e4e1ef;
  color: #000000;
}
#T_92fb8_row1_col6 {
  background-color: #e2dfee;
  color: #000000;
}
#T_92fb8_row2_col0 {
  background-color: #fbf4f9;
  color: #000000;
}
#T_92fb8_row2_col1 {
  background-color: #faf3f9;
  color: #000000;
}
#T_92fb8_row2_col3 {
  background-color: #f8f1f8;
  color: #000000;
}
#T_92fb8_row2_col4 {
  background-color: #d6d6e9;
  color: #000000;
}
#T_92fb8_row2_col5, #T_92fb8_row2_col6, #T_92fb8_row5_col0 {
  background-color: #fdf5fa;
  color: #000000;
}
#T_92fb8_row3_col0, #T_92fb8_row3_col4, #T_92fb8_row4_col1, #T_92fb8_row4_col3, #T_92fb8_row4_col5, #T_92fb8_row4_col6, #T_92fb8_row5_col2, #T_92fb8_row5_col4, #T_92fb8_row6_col4 {
  background-color: #fff7fb;
  color: #000000;
}
#T_92fb8_row3_col2 {
  background-color: #fbf3f9;
  color: #000000;
}
#T_92fb8_row4_col2 {
  background-color: #d9d8ea;
  color: #000000;
}
#T_92fb8_row5_col1 {
  background-color: #f1ebf4;
  color: #000000;
}
#T_92fb8_row5_col6, #T_92fb8_row6_col5 {
  background-color: #023b5d;
  color: #f1f1f1;
}
#T_92fb8_row6_col0 {
  background-color: #fcf4fa;
  color: #000000;
}
#T_92fb8_row6_col1 {
  background-color: #efe9f3;
  color: #000000;
}
#T_92fb8_row6_col2 {
  background-color: #fef6fb;
  color: #000000;
}
</style>
<table id="T_92fb8">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_92fb8_level0_col0" class="col_heading level0 col0" >age</th>
      <th id="T_92fb8_level0_col1" class="col_heading level0 col1" >balance</th>
      <th id="T_92fb8_level0_col2" class="col_heading level0 col2" >day</th>
      <th id="T_92fb8_level0_col3" class="col_heading level0 col3" >duration</th>
      <th id="T_92fb8_level0_col4" class="col_heading level0 col4" >campaign</th>
      <th id="T_92fb8_level0_col5" class="col_heading level0 col5" >pdays</th>
      <th id="T_92fb8_level0_col6" class="col_heading level0 col6" >previous</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_92fb8_level0_row0" class="row_heading level0 row0" >age</th>
      <td id="T_92fb8_row0_col0" class="data row0 col0" >1.000000</td>
      <td id="T_92fb8_row0_col1" class="data row0 col1" >0.096380</td>
      <td id="T_92fb8_row0_col2" class="data row0 col2" >-0.008948</td>
      <td id="T_92fb8_row0_col3" class="data row0 col3" >-0.033257</td>
      <td id="T_92fb8_row0_col4" class="data row0 col4" >0.037136</td>
      <td id="T_92fb8_row0_col5" class="data row0 col5" >-0.017468</td>
      <td id="T_92fb8_row0_col6" class="data row0 col6" >-0.011900</td>
    </tr>
    <tr>
      <th id="T_92fb8_level0_row1" class="row_heading level0 row1" >balance</th>
      <td id="T_92fb8_row1_col0" class="data row1 col0" >0.096380</td>
      <td id="T_92fb8_row1_col1" class="data row1 col1" >1.000000</td>
      <td id="T_92fb8_row1_col2" class="data row1 col2" >0.001329</td>
      <td id="T_92fb8_row1_col3" class="data row1 col3" >0.042651</td>
      <td id="T_92fb8_row1_col4" class="data row1 col4" >-0.030959</td>
      <td id="T_92fb8_row1_col5" class="data row1 col5" >0.069676</td>
      <td id="T_92fb8_row1_col6" class="data row1 col6" >0.079536</td>
    </tr>
    <tr>
      <th id="T_92fb8_level0_row2" class="row_heading level0 row2" >day</th>
      <td id="T_92fb8_row2_col0" class="data row2 col0" >-0.008948</td>
      <td id="T_92fb8_row2_col1" class="data row2 col1" >0.001329</td>
      <td id="T_92fb8_row2_col2" class="data row2 col2" >1.000000</td>
      <td id="T_92fb8_row2_col3" class="data row2 col3" >-0.058142</td>
      <td id="T_92fb8_row2_col4" class="data row2 col4" >0.139581</td>
      <td id="T_92fb8_row2_col5" class="data row2 col5" >-0.092226</td>
      <td id="T_92fb8_row2_col6" class="data row2 col6" >-0.087780</td>
    </tr>
    <tr>
      <th id="T_92fb8_level0_row3" class="row_heading level0 row3" >duration</th>
      <td id="T_92fb8_row3_col0" class="data row3 col0" >-0.033257</td>
      <td id="T_92fb8_row3_col1" class="data row3 col1" >0.042651</td>
      <td id="T_92fb8_row3_col2" class="data row3 col2" >-0.058142</td>
      <td id="T_92fb8_row3_col3" class="data row3 col3" >1.000000</td>
      <td id="T_92fb8_row3_col4" class="data row3 col4" >-0.107962</td>
      <td id="T_92fb8_row3_col5" class="data row3 col5" >0.028698</td>
      <td id="T_92fb8_row3_col6" class="data row3 col6" >0.031175</td>
    </tr>
    <tr>
      <th id="T_92fb8_level0_row4" class="row_heading level0 row4" >campaign</th>
      <td id="T_92fb8_row4_col0" class="data row4 col0" >0.037136</td>
      <td id="T_92fb8_row4_col1" class="data row4 col1" >-0.030959</td>
      <td id="T_92fb8_row4_col2" class="data row4 col2" >0.139581</td>
      <td id="T_92fb8_row4_col3" class="data row4 col3" >-0.107962</td>
      <td id="T_92fb8_row4_col4" class="data row4 col4" >1.000000</td>
      <td id="T_92fb8_row4_col5" class="data row4 col5" >-0.112284</td>
      <td id="T_92fb8_row4_col6" class="data row4 col6" >-0.108448</td>
    </tr>
    <tr>
      <th id="T_92fb8_level0_row5" class="row_heading level0 row5" >pdays</th>
      <td id="T_92fb8_row5_col0" class="data row5 col0" >-0.017468</td>
      <td id="T_92fb8_row5_col1" class="data row5 col1" >0.069676</td>
      <td id="T_92fb8_row5_col2" class="data row5 col2" >-0.092226</td>
      <td id="T_92fb8_row5_col3" class="data row5 col3" >0.028698</td>
      <td id="T_92fb8_row5_col4" class="data row5 col4" >-0.112284</td>
      <td id="T_92fb8_row5_col5" class="data row5 col5" >1.000000</td>
      <td id="T_92fb8_row5_col6" class="data row5 col6" >0.985645</td>
    </tr>
    <tr>
      <th id="T_92fb8_level0_row6" class="row_heading level0 row6" >previous</th>
      <td id="T_92fb8_row6_col0" class="data row6 col0" >-0.011900</td>
      <td id="T_92fb8_row6_col1" class="data row6 col1" >0.079536</td>
      <td id="T_92fb8_row6_col2" class="data row6 col2" >-0.087780</td>
      <td id="T_92fb8_row6_col3" class="data row6 col3" >0.031175</td>
      <td id="T_92fb8_row6_col4" class="data row6 col4" >-0.108448</td>
      <td id="T_92fb8_row6_col5" class="data row6 col5" >0.985645</td>
      <td id="T_92fb8_row6_col6" class="data row6 col6" >1.000000</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">display</span><span class="p">(</span><span class="n">EDA_plot</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">numeric_cols</span><span class="p">,</span> <span class="n">categorical_cols</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-bcccc16e73c947a1925ed54d578ee003.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-bcccc16e73c947a1925ed54d578ee003.vega-embed details,
  #altair-viz-bcccc16e73c947a1925ed54d578ee003.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-bcccc16e73c947a1925ed54d578ee003"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-bcccc16e73c947a1925ed54d578ee003") {
      outputDiv = document.getElementById("altair-viz-bcccc16e73c947a1925ed54d578ee003");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.15.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.15.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "source_0"}, {"name": "data_1", "values": [{"__count": 9458, "job": "management"}, {"__count": 7597, "job": "technician"}, {"__count": 1487, "job": "entrepreneur"}, {"__count": 9732, "job": "blue-collar"}, {"__count": 288, "job": "unknown"}, {"__count": 2264, "job": "retired"}, {"__count": 5171, "job": "admin."}, {"__count": 4154, "job": "services"}, {"__count": 1579, "job": "self-employed"}, {"__count": 1303, "job": "unemployed"}, {"__count": 1240, "job": "housemaid"}, {"__count": 938, "job": "student"}]}, {"name": "data_2", "values": [{"__count": 27214, "marital": "married"}, {"__count": 12790, "marital": "single"}, {"__count": 5207, "marital": "divorced"}]}, {"name": "data_3", "values": [{"__count": 13301, "education": "tertiary"}, {"__count": 23202, "education": "secondary"}, {"__count": 1857, "education": "unknown"}, {"__count": 6851, "education": "primary"}]}, {"name": "data_4", "values": [{"__count": 44396, "default": "no"}, {"__count": 815, "default": "yes"}]}, {"name": "data_5", "values": [{"__count": 25130, "housing": "yes"}, {"__count": 20081, "housing": "no"}]}, {"name": "data_6", "values": [{"__count": 37967, "loan": "no"}, {"__count": 7244, "loan": "yes"}]}, {"name": "data_7", "values": [{"__count": 36959, "poutcome": "unknown"}, {"__count": 4901, "poutcome": "failure"}, {"__count": 1840, "poutcome": "other"}, {"__count": 1511, "poutcome": "success"}]}, {"name": "data_1_child__job_x_domain___count", "values": [{"min": 288, "max": 9732}]}, {"name": "source_0_child__job_y_domain_job", "values": [{"job": "management", "sort_field": 9458}, {"job": "technician", "sort_field": 7597}, {"job": "entrepreneur", "sort_field": 1487}, {"job": "blue-collar", "sort_field": 9732}, {"job": "unknown", "sort_field": 288}, {"job": "retired", "sort_field": 2264}, {"job": "admin.", "sort_field": 5171}, {"job": "services", "sort_field": 4154}, {"job": "self-employed", "sort_field": 1579}, {"job": "unemployed", "sort_field": 1303}, {"job": "housemaid", "sort_field": 1240}, {"job": "student", "sort_field": 938}]}, {"name": "data_2_child__marital_x_domain___count", "values": [{"min": 5207, "max": 27214}]}, {"name": "source_0_child__marital_y_domain_marital", "values": [{"marital": "married", "sort_field": 27214}, {"marital": "single", "sort_field": 12790}, {"marital": "divorced", "sort_field": 5207}]}, {"name": "data_3_child__education_x_domain___count", "values": [{"min": 1857, "max": 23202}]}, {"name": "source_0_child__education_y_domain_education", "values": [{"education": "tertiary", "sort_field": 13301}, {"education": "secondary", "sort_field": 23202}, {"education": "unknown", "sort_field": 1857}, {"education": "primary", "sort_field": 6851}]}, {"name": "data_4_child__default_x_domain___count", "values": [{"min": 815, "max": 44396}]}, {"name": "source_0_child__default_y_domain_default", "values": [{"default": "no", "sort_field": 44396}, {"default": "yes", "sort_field": 815}]}, {"name": "data_5_child__housing_x_domain___count", "values": [{"min": 20081, "max": 25130}]}, {"name": "source_0_child__housing_y_domain_housing", "values": [{"housing": "yes", "sort_field": 25130}, {"housing": "no", "sort_field": 20081}]}, {"name": "data_6_child__loan_x_domain___count", "values": [{"min": 7244, "max": 37967}]}, {"name": "source_0_child__loan_y_domain_loan", "values": [{"loan": "no", "sort_field": 37967}, {"loan": "yes", "sort_field": 7244}]}, {"name": "data_7_child__poutcome_x_domain___count", "values": [{"min": 1511, "max": 36959}]}, {"name": "source_0_child__poutcome_y_domain_poutcome", "values": [{"poutcome": "unknown", "sort_field": 36959}, {"poutcome": "failure", "sort_field": 4901}, {"poutcome": "other", "sort_field": 1840}, {"poutcome": "success", "sort_field": 1511}]}], "signals": [{"name": "childWidth", "value": 300}, {"name": "child__job_y_step", "value": 20}, {"name": "child__job_height", "update": "bandspace(domain('child__job_y').length, 0.1, 0.05) * child__job_y_step"}, {"name": "child__marital_y_step", "value": 20}, {"name": "child__marital_height", "update": "bandspace(domain('child__marital_y').length, 0.1, 0.05) * child__marital_y_step"}, {"name": "child__education_y_step", "value": 20}, {"name": "child__education_height", "update": "bandspace(domain('child__education_y').length, 0.1, 0.05) * child__education_y_step"}, {"name": "child__default_y_step", "value": 20}, {"name": "child__default_height", "update": "bandspace(domain('child__default_y').length, 0.1, 0.05) * child__default_y_step"}, {"name": "child__housing_y_step", "value": 20}, {"name": "child__housing_height", "update": "bandspace(domain('child__housing_y').length, 0.1, 0.05) * child__housing_y_step"}, {"name": "child__loan_y_step", "value": 20}, {"name": "child__loan_height", "update": "bandspace(domain('child__loan_y').length, 0.1, 0.05) * child__loan_y_step"}, {"name": "child__poutcome_y_step", "value": 20}, {"name": "child__poutcome_height", "update": "bandspace(domain('child__poutcome_y').length, 0.1, 0.05) * child__poutcome_y_step"}], "marks": [{"type": "group", "name": "child__job_group", "encode": {"update": {"height": {"signal": "child__job_height"}, "width": {"signal": "childWidth"}}}, "marks": [{"type": "rect", "name": "child__job_marks", "from": {"data": "data_1"}, "encode": {"update": {"x": {"field": "__count", "scale": "child__job_x"}, "fill": {"value": "#4c78a8"}, "ariaRoleDescription": {"value": "bar"}, "opacity": {"value": 0.9}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; job: \" + (isValid(datum[\"job\"]) ? datum[\"job\"] : \"\"+datum[\"job\"])"}, "x2": {"value": 0, "scale": "child__job_x"}, "y": {"field": "job", "scale": "child__job_y"}, "height": {"signal": "max(0.25, bandwidth('child__job_y'))"}}}, "style": ["bar"]}], "axes": [{"scale": "child__job_x", "aria": false, "zindex": 0, "tickCount": {"signal": "ceil(childWidth/40)"}, "labels": false, "grid": true, "domain": false, "orient": "bottom", "gridScale": "child__job_y", "minExtent": 0, "ticks": false, "maxExtent": 0}, {"scale": "child__job_x", "orient": "bottom", "title": "Count", "labelFlush": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "labelOverlap": true, "zindex": 0, "grid": false}, {"scale": "child__job_y", "grid": false, "orient": "left", "zindex": 0, "title": "job"}], "style": "cell"}, {"type": "group", "name": "child__marital_group", "encode": {"update": {"height": {"signal": "child__marital_height"}, "width": {"signal": "childWidth"}}}, "marks": [{"type": "rect", "name": "child__marital_marks", "from": {"data": "data_2"}, "encode": {"update": {"x2": {"value": 0, "scale": "child__marital_x"}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; marital: \" + (isValid(datum[\"marital\"]) ? datum[\"marital\"] : \"\"+datum[\"marital\"])"}, "ariaRoleDescription": {"value": "bar"}, "x": {"field": "__count", "scale": "child__marital_x"}, "height": {"signal": "max(0.25, bandwidth('child__marital_y'))"}, "opacity": {"value": 0.9}, "y": {"field": "marital", "scale": "child__marital_y"}, "fill": {"value": "#4c78a8"}}}, "style": ["bar"]}], "axes": [{"scale": "child__marital_x", "orient": "bottom", "aria": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "domain": false, "zindex": 0, "grid": true, "ticks": false, "maxExtent": 0, "labels": false, "gridScale": "child__marital_y", "minExtent": 0}, {"scale": "child__marital_x", "title": "Count", "orient": "bottom", "labelOverlap": true, "labelFlush": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "grid": false}, {"scale": "child__marital_y", "zindex": 0, "title": "marital", "grid": false, "orient": "left"}], "style": "cell"}, {"type": "group", "name": "child__education_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "child__education_height"}}}, "marks": [{"type": "rect", "name": "child__education_marks", "from": {"data": "data_3"}, "encode": {"update": {"fill": {"value": "#4c78a8"}, "y": {"field": "education", "scale": "child__education_y"}, "height": {"signal": "max(0.25, bandwidth('child__education_y'))"}, "opacity": {"value": 0.9}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; education: \" + (isValid(datum[\"education\"]) ? datum[\"education\"] : \"\"+datum[\"education\"])"}, "x": {"field": "__count", "scale": "child__education_x"}, "x2": {"value": 0, "scale": "child__education_x"}, "ariaRoleDescription": {"value": "bar"}}}, "style": ["bar"]}], "axes": [{"scale": "child__education_x", "aria": false, "minExtent": 0, "gridScale": "child__education_y", "orient": "bottom", "labels": false, "maxExtent": 0, "ticks": false, "grid": true, "zindex": 0, "tickCount": {"signal": "ceil(childWidth/40)"}, "domain": false}, {"scale": "child__education_x", "labelFlush": true, "grid": false, "title": "Count", "labelOverlap": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "orient": "bottom"}, {"scale": "child__education_y", "grid": false, "title": "education", "zindex": 0, "orient": "left"}], "style": "cell"}, {"type": "group", "name": "child__default_group", "encode": {"update": {"height": {"signal": "child__default_height"}, "width": {"signal": "childWidth"}}}, "marks": [{"type": "rect", "name": "child__default_marks", "from": {"data": "data_4"}, "encode": {"update": {"fill": {"value": "#4c78a8"}, "ariaRoleDescription": {"value": "bar"}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; default: \" + (isValid(datum[\"default\"]) ? datum[\"default\"] : \"\"+datum[\"default\"])"}, "x2": {"value": 0, "scale": "child__default_x"}, "y": {"field": "default", "scale": "child__default_y"}, "x": {"field": "__count", "scale": "child__default_x"}, "opacity": {"value": 0.9}, "height": {"signal": "max(0.25, bandwidth('child__default_y'))"}}}, "style": ["bar"]}], "axes": [{"scale": "child__default_x", "gridScale": "child__default_y", "grid": true, "orient": "bottom", "tickCount": {"signal": "ceil(childWidth/40)"}, "maxExtent": 0, "ticks": false, "labels": false, "domain": false, "aria": false, "minExtent": 0, "zindex": 0}, {"scale": "child__default_x", "labelFlush": true, "labelOverlap": true, "zindex": 0, "tickCount": {"signal": "ceil(childWidth/40)"}, "orient": "bottom", "grid": false, "title": "Count"}, {"scale": "child__default_y", "orient": "left", "grid": false, "zindex": 0, "title": "default"}], "style": "cell"}, {"type": "group", "name": "child__housing_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "child__housing_height"}}}, "marks": [{"type": "rect", "name": "child__housing_marks", "from": {"data": "data_5"}, "encode": {"update": {"fill": {"value": "#4c78a8"}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; housing: \" + (isValid(datum[\"housing\"]) ? datum[\"housing\"] : \"\"+datum[\"housing\"])"}, "x": {"field": "__count", "scale": "child__housing_x"}, "opacity": {"value": 0.9}, "ariaRoleDescription": {"value": "bar"}, "height": {"signal": "max(0.25, bandwidth('child__housing_y'))"}, "x2": {"value": 0, "scale": "child__housing_x"}, "y": {"field": "housing", "scale": "child__housing_y"}}}, "style": ["bar"]}], "axes": [{"scale": "child__housing_x", "minExtent": 0, "tickCount": {"signal": "ceil(childWidth/40)"}, "labels": false, "grid": true, "aria": false, "maxExtent": 0, "domain": false, "gridScale": "child__housing_y", "ticks": false, "zindex": 0, "orient": "bottom"}, {"scale": "child__housing_x", "zindex": 0, "labelOverlap": true, "grid": false, "orient": "bottom", "title": "Count", "labelFlush": true, "tickCount": {"signal": "ceil(childWidth/40)"}}, {"scale": "child__housing_y", "zindex": 0, "grid": false, "orient": "left", "title": "housing"}], "style": "cell"}, {"type": "group", "name": "child__loan_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "child__loan_height"}}}, "marks": [{"type": "rect", "name": "child__loan_marks", "from": {"data": "data_6"}, "encode": {"update": {"fill": {"value": "#4c78a8"}, "height": {"signal": "max(0.25, bandwidth('child__loan_y'))"}, "x": {"field": "__count", "scale": "child__loan_x"}, "x2": {"value": 0, "scale": "child__loan_x"}, "y": {"field": "loan", "scale": "child__loan_y"}, "ariaRoleDescription": {"value": "bar"}, "opacity": {"value": 0.9}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; loan: \" + (isValid(datum[\"loan\"]) ? datum[\"loan\"] : \"\"+datum[\"loan\"])"}}}, "style": ["bar"]}], "axes": [{"scale": "child__loan_x", "ticks": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "minExtent": 0, "orient": "bottom", "gridScale": "child__loan_y", "labels": false, "grid": true, "zindex": 0, "domain": false, "aria": false, "maxExtent": 0}, {"scale": "child__loan_x", "labelOverlap": true, "labelFlush": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "grid": false, "title": "Count", "orient": "bottom", "zindex": 0}, {"scale": "child__loan_y", "title": "loan", "grid": false, "orient": "left", "zindex": 0}], "style": "cell"}, {"type": "group", "name": "child__poutcome_group", "encode": {"update": {"height": {"signal": "child__poutcome_height"}, "width": {"signal": "childWidth"}}}, "marks": [{"type": "rect", "name": "child__poutcome_marks", "from": {"data": "data_7"}, "encode": {"update": {"x2": {"value": 0, "scale": "child__poutcome_x"}, "ariaRoleDescription": {"value": "bar"}, "fill": {"value": "#4c78a8"}, "y": {"field": "poutcome", "scale": "child__poutcome_y"}, "x": {"field": "__count", "scale": "child__poutcome_x"}, "opacity": {"value": 0.9}, "height": {"signal": "max(0.25, bandwidth('child__poutcome_y'))"}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; poutcome: \" + (isValid(datum[\"poutcome\"]) ? datum[\"poutcome\"] : \"\"+datum[\"poutcome\"])"}}}, "style": ["bar"]}], "axes": [{"scale": "child__poutcome_x", "tickCount": {"signal": "ceil(childWidth/40)"}, "ticks": false, "zindex": 0, "labels": false, "gridScale": "child__poutcome_y", "minExtent": 0, "maxExtent": 0, "domain": false, "grid": true, "orient": "bottom", "aria": false}, {"scale": "child__poutcome_x", "labelFlush": true, "title": "Count", "labelOverlap": true, "zindex": 0, "grid": false, "orient": "bottom", "tickCount": {"signal": "ceil(childWidth/40)"}}, {"scale": "child__poutcome_y", "zindex": 0, "grid": false, "title": "poutcome", "orient": "left"}], "style": "cell"}], "scales": [{"name": "child__job_x", "type": "linear", "domain": [{"signal": "(data(\"data_1_child__job_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_1_child__job_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "zero": true, "nice": true}, {"name": "child__job_y", "type": "band", "domain": {"data": "source_0_child__job_y_domain_job", "field": "job", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__job_y_step"}}, "paddingOuter": 0.05, "paddingInner": 0.1}, {"name": "child__marital_x", "type": "linear", "domain": [{"signal": "(data(\"data_2_child__marital_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_2_child__marital_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "zero": true, "nice": true}, {"name": "child__marital_y", "type": "band", "domain": {"data": "source_0_child__marital_y_domain_marital", "field": "marital", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__marital_y_step"}}, "paddingOuter": 0.05, "paddingInner": 0.1}, {"name": "child__education_x", "type": "linear", "domain": [{"signal": "(data(\"data_3_child__education_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_3_child__education_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "zero": true, "nice": true}, {"name": "child__education_y", "type": "band", "domain": {"data": "source_0_child__education_y_domain_education", "field": "education", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__education_y_step"}}, "paddingInner": 0.1, "paddingOuter": 0.05}, {"name": "child__default_x", "type": "linear", "domain": [{"signal": "(data(\"data_4_child__default_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_4_child__default_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__default_y", "type": "band", "domain": {"data": "source_0_child__default_y_domain_default", "field": "default", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__default_y_step"}}, "paddingOuter": 0.05, "paddingInner": 0.1}, {"name": "child__housing_x", "type": "linear", "domain": [{"signal": "(data(\"data_5_child__housing_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_5_child__housing_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__housing_y", "type": "band", "domain": {"data": "source_0_child__housing_y_domain_housing", "field": "housing", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__housing_y_step"}}, "paddingOuter": 0.05, "paddingInner": 0.1}, {"name": "child__loan_x", "type": "linear", "domain": [{"signal": "(data(\"data_6_child__loan_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_6_child__loan_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__loan_y", "type": "band", "domain": {"data": "source_0_child__loan_y_domain_loan", "field": "loan", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__loan_y_step"}}, "paddingInner": 0.1, "paddingOuter": 0.05}, {"name": "child__poutcome_x", "type": "linear", "domain": [{"signal": "(data(\"data_7_child__poutcome_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_7_child__poutcome_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__poutcome_y", "type": "band", "domain": {"data": "source_0_child__poutcome_y_domain_poutcome", "field": "poutcome", "sort": {"op": "max", "field": "sort_field", "order": "descending"}}, "range": {"step": {"signal": "child__poutcome_y_step"}}, "paddingOuter": 0.05, "paddingInner": 0.1}], "padding": 5, "layout": {"padding": 20, "columns": 2, "bounds": "full", "align": "all"}, "background": "white"}, {"mode": "vega"});
</script></div><div class="output text_html">
<style>
  #altair-viz-bc9a89c24a8348f59746ed7d8827573a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-bc9a89c24a8348f59746ed7d8827573a.vega-embed details,
  #altair-viz-bc9a89c24a8348f59746ed7d8827573a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-bc9a89c24a8348f59746ed7d8827573a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-bc9a89c24a8348f59746ed7d8827573a") {
      outputDiv = document.getElementById("altair-viz-bc9a89c24a8348f59746ed7d8827573a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.15.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.15.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "source_0"}, {"name": "data_0", "values": [{"__count": 45148, "bin_maxbins_25_previous": 0.0, "bin_maxbins_25_previous_end": 20.0}, {"__count": 57, "bin_maxbins_25_previous": 20.0, "bin_maxbins_25_previous_end": 40.0}, {"__count": 5, "bin_maxbins_25_previous": 40.0, "bin_maxbins_25_previous_end": 60.0}, {"__count": 1, "bin_maxbins_25_previous": 260.0, "bin_maxbins_25_previous_end": 280.0}]}, {"name": "data_1", "values": [{"__count": 3922, "bin_maxbins_25_age": 55.0, "bin_maxbins_25_age_end": 60.0}, {"__count": 6185, "bin_maxbins_25_age": 40.0, "bin_maxbins_25_age_end": 45.0}, {"__count": 9740, "bin_maxbins_25_age": 30.0, "bin_maxbins_25_age_end": 35.0}, {"__count": 5470, "bin_maxbins_25_age": 45.0, "bin_maxbins_25_age_end": 50.0}, {"__count": 8349, "bin_maxbins_25_age": 35.0, "bin_maxbins_25_age_end": 40.0}, {"__count": 4464, "bin_maxbins_25_age": 25.0, "bin_maxbins_25_age_end": 30.0}, {"__count": 4488, "bin_maxbins_25_age": 50.0, "bin_maxbins_25_age_end": 55.0}, {"__count": 974, "bin_maxbins_25_age": 60.0, "bin_maxbins_25_age_end": 65.0}, {"__count": 762, "bin_maxbins_25_age": 20.0, "bin_maxbins_25_age_end": 25.0}, {"__count": 256, "bin_maxbins_25_age": 65.0, "bin_maxbins_25_age_end": 70.0}, {"__count": 98, "bin_maxbins_25_age": 80.0, "bin_maxbins_25_age_end": 85.0}, {"__count": 170, "bin_maxbins_25_age": 75.0, "bin_maxbins_25_age_end": 80.0}, {"__count": 254, "bin_maxbins_25_age": 70.0, "bin_maxbins_25_age_end": 75.0}, {"__count": 47, "bin_maxbins_25_age": 15.0, "bin_maxbins_25_age_end": 20.0}, {"__count": 23, "bin_maxbins_25_age": 85.0, "bin_maxbins_25_age_end": 90.0}, {"__count": 9, "bin_maxbins_25_age": 90.0, "bin_maxbins_25_age_end": 95.0}]}, {"name": "data_2", "values": [{"__count": 38598, "bin_maxbins_25_balance": 0.0, "bin_maxbins_25_balance_end": 5000.0}, {"__count": 3764, "bin_maxbins_25_balance": -5000.0, "bin_maxbins_25_balance_end": 0.0}, {"__count": 478, "bin_maxbins_25_balance": 10000.0, "bin_maxbins_25_balance_end": 15000.0}, {"__count": 2018, "bin_maxbins_25_balance": 5000.0, "bin_maxbins_25_balance_end": 10000.0}, {"__count": 96, "bin_maxbins_25_balance": 20000.0, "bin_maxbins_25_balance_end": 25000.0}, {"__count": 3, "bin_maxbins_25_balance": 45000.0, "bin_maxbins_25_balance_end": 50000.0}, {"__count": 5, "bin_maxbins_25_balance": 55000.0, "bin_maxbins_25_balance_end": 60000.0}, {"__count": 158, "bin_maxbins_25_balance": 15000.0, "bin_maxbins_25_balance_end": 20000.0}, {"__count": 45, "bin_maxbins_25_balance": 25000.0, "bin_maxbins_25_balance_end": 30000.0}, {"__count": 13, "bin_maxbins_25_balance": 35000.0, "bin_maxbins_25_balance_end": 40000.0}, {"__count": 11, "bin_maxbins_25_balance": 30000.0, "bin_maxbins_25_balance_end": 35000.0}, {"__count": 5, "bin_maxbins_25_balance": 50000.0, "bin_maxbins_25_balance_end": 55000.0}, {"__count": 2, "bin_maxbins_25_balance": -10000.0, "bin_maxbins_25_balance_end": -5000.0}, {"__count": 7, "bin_maxbins_25_balance": 40000.0, "bin_maxbins_25_balance_end": 45000.0}, {"__count": 1, "bin_maxbins_25_balance": 60000.0, "bin_maxbins_25_balance_end": 65000.0}, {"__count": 2, "bin_maxbins_25_balance": 65000.0, "bin_maxbins_25_balance_end": 70000.0}, {"__count": 1, "bin_maxbins_25_balance": 95000.0, "bin_maxbins_25_balance_end": 100000.0}, {"__count": 1, "bin_maxbins_25_balance": 100000.0, "bin_maxbins_25_balance_end": 105000.0}, {"__count": 1, "bin_maxbins_25_balance": 70000.0, "bin_maxbins_25_balance_end": 75000.0}, {"__count": 2, "bin_maxbins_25_balance": 80000.0, "bin_maxbins_25_balance_end": 85000.0}]}, {"name": "data_3", "values": [{"__count": 3355, "bin_maxbins_25_day": 4.0, "bin_maxbins_25_day_end": 6.0}, {"__count": 3749, "bin_maxbins_25_day": 6.0, "bin_maxbins_25_day_end": 8.0}, {"__count": 3403, "bin_maxbins_25_day": 8.0, "bin_maxbins_25_day_end": 10.0}, {"__count": 3188, "bin_maxbins_25_day": 12.0, "bin_maxbins_25_day_end": 14.0}, {"__count": 3551, "bin_maxbins_25_day": 14.0, "bin_maxbins_25_day_end": 16.0}, {"__count": 3354, "bin_maxbins_25_day": 16.0, "bin_maxbins_25_day_end": 18.0}, {"__count": 4065, "bin_maxbins_25_day": 18.0, "bin_maxbins_25_day_end": 20.0}, {"__count": 4778, "bin_maxbins_25_day": 20.0, "bin_maxbins_25_day_end": 22.0}, {"__count": 1844, "bin_maxbins_25_day": 22.0, "bin_maxbins_25_day_end": 24.0}, {"__count": 2156, "bin_maxbins_25_day": 26.0, "bin_maxbins_25_day_end": 28.0}, {"__count": 3575, "bin_maxbins_25_day": 28.0, "bin_maxbins_25_day_end": 30.0}, {"__count": 2209, "bin_maxbins_25_day": 30.0, "bin_maxbins_25_day_end": 32.0}, {"__count": 2372, "bin_maxbins_25_day": 2.0, "bin_maxbins_25_day_end": 4.0}, {"__count": 2003, "bin_maxbins_25_day": 10.0, "bin_maxbins_25_day_end": 12.0}, {"__count": 1287, "bin_maxbins_25_day": 24.0, "bin_maxbins_25_day_end": 26.0}, {"__count": 322, "bin_maxbins_25_day": 0.0, "bin_maxbins_25_day_end": 2.0}]}, {"name": "data_4", "values": [{"__count": 12559, "bin_maxbins_25_duration": 200.0, "bin_maxbins_25_duration_end": 400.0}, {"__count": 24752, "bin_maxbins_25_duration": 0.0, "bin_maxbins_25_duration_end": 200.0}, {"__count": 4098, "bin_maxbins_25_duration": 400.0, "bin_maxbins_25_duration_end": 600.0}, {"__count": 58, "bin_maxbins_25_duration": 1600.0, "bin_maxbins_25_duration_end": 1800.0}, {"__count": 151, "bin_maxbins_25_duration": 1400.0, "bin_maxbins_25_duration_end": 1600.0}, {"__count": 1864, "bin_maxbins_25_duration": 600.0, "bin_maxbins_25_duration_end": 800.0}, {"__count": 875, "bin_maxbins_25_duration": 800.0, "bin_maxbins_25_duration_end": 1000.0}, {"__count": 500, "bin_maxbins_25_duration": 1000.0, "bin_maxbins_25_duration_end": 1200.0}, {"__count": 247, "bin_maxbins_25_duration": 1200.0, "bin_maxbins_25_duration_end": 1400.0}, {"__count": 20, "bin_maxbins_25_duration": 2000.0, "bin_maxbins_25_duration_end": 2200.0}, {"__count": 48, "bin_maxbins_25_duration": 1800.0, "bin_maxbins_25_duration_end": 2000.0}, {"__count": 7, "bin_maxbins_25_duration": 2400.0, "bin_maxbins_25_duration_end": 2600.0}, {"__count": 4, "bin_maxbins_25_duration": 3200.0, "bin_maxbins_25_duration_end": 3400.0}, {"__count": 10, "bin_maxbins_25_duration": 2200.0, "bin_maxbins_25_duration_end": 2400.0}, {"__count": 6, "bin_maxbins_25_duration": 3000.0, "bin_maxbins_25_duration_end": 3200.0}, {"__count": 7, "bin_maxbins_25_duration": 2600.0, "bin_maxbins_25_duration_end": 2800.0}, {"__count": 1, "bin_maxbins_25_duration": 3800.0, "bin_maxbins_25_duration_end": 4000.0}, {"__count": 1, "bin_maxbins_25_duration": 3400.0, "bin_maxbins_25_duration_end": 3600.0}, {"__count": 1, "bin_maxbins_25_duration": 4800.0, "bin_maxbins_25_duration_end": 5000.0}, {"__count": 1, "bin_maxbins_25_duration": 2800.0, "bin_maxbins_25_duration_end": 3000.0}, {"__count": 1, "bin_maxbins_25_duration": 3600.0, "bin_maxbins_25_duration_end": 3800.0}]}, {"name": "data_5", "values": [{"__count": 39092, "bin_maxbins_25_campaign": 0.0, "bin_maxbins_25_campaign_end": 5.0}, {"__count": 4657, "bin_maxbins_25_campaign": 5.0, "bin_maxbins_25_campaign_end": 10.0}, {"__count": 848, "bin_maxbins_25_campaign": 10.0, "bin_maxbins_25_campaign_end": 15.0}, {"__count": 327, "bin_maxbins_25_campaign": 15.0, "bin_maxbins_25_campaign_end": 20.0}, {"__count": 143, "bin_maxbins_25_campaign": 20.0, "bin_maxbins_25_campaign_end": 25.0}, {"__count": 40, "bin_maxbins_25_campaign": 30.0, "bin_maxbins_25_campaign_end": 35.0}, {"__count": 77, "bin_maxbins_25_campaign": 25.0, "bin_maxbins_25_campaign_end": 30.0}, {"__count": 6, "bin_maxbins_25_campaign": 40.0, "bin_maxbins_25_campaign_end": 45.0}, {"__count": 3, "bin_maxbins_25_campaign": 50.0, "bin_maxbins_25_campaign_end": 55.0}, {"__count": 1, "bin_maxbins_25_campaign": 60.0, "bin_maxbins_25_campaign_end": 65.0}, {"__count": 2, "bin_maxbins_25_campaign": 55.0, "bin_maxbins_25_campaign_end": 60.0}, {"__count": 14, "bin_maxbins_25_campaign": 35.0, "bin_maxbins_25_campaign_end": 40.0}, {"__count": 1, "bin_maxbins_25_campaign": 45.0, "bin_maxbins_25_campaign_end": 50.0}]}, {"name": "data_6", "values": [{"__count": 36954, "bin_maxbins_25_pdays": -50.0, "bin_maxbins_25_pdays_end": 0.0}, {"__count": 1983, "bin_maxbins_25_pdays": 150.0, "bin_maxbins_25_pdays_end": 200.0}, {"__count": 1157, "bin_maxbins_25_pdays": 50.0, "bin_maxbins_25_pdays_end": 100.0}, {"__count": 896, "bin_maxbins_25_pdays": 100.0, "bin_maxbins_25_pdays_end": 150.0}, {"__count": 250, "bin_maxbins_25_pdays": 0.0, "bin_maxbins_25_pdays_end": 50.0}, {"__count": 976, "bin_maxbins_25_pdays": 250.0, "bin_maxbins_25_pdays_end": 300.0}, {"__count": 498, "bin_maxbins_25_pdays": 200.0, "bin_maxbins_25_pdays_end": 250.0}, {"__count": 1163, "bin_maxbins_25_pdays": 300.0, "bin_maxbins_25_pdays_end": 350.0}, {"__count": 1100, "bin_maxbins_25_pdays": 350.0, "bin_maxbins_25_pdays_end": 400.0}, {"__count": 61, "bin_maxbins_25_pdays": 400.0, "bin_maxbins_25_pdays_end": 450.0}, {"__count": 66, "bin_maxbins_25_pdays": 450.0, "bin_maxbins_25_pdays_end": 500.0}, {"__count": 33, "bin_maxbins_25_pdays": 500.0, "bin_maxbins_25_pdays_end": 550.0}, {"__count": 22, "bin_maxbins_25_pdays": 550.0, "bin_maxbins_25_pdays_end": 600.0}, {"__count": 6, "bin_maxbins_25_pdays": 600.0, "bin_maxbins_25_pdays_end": 650.0}, {"__count": 13, "bin_maxbins_25_pdays": 650.0, "bin_maxbins_25_pdays_end": 700.0}, {"__count": 17, "bin_maxbins_25_pdays": 750.0, "bin_maxbins_25_pdays_end": 800.0}, {"__count": 5, "bin_maxbins_25_pdays": 700.0, "bin_maxbins_25_pdays_end": 750.0}, {"__count": 8, "bin_maxbins_25_pdays": 800.0, "bin_maxbins_25_pdays_end": 850.0}, {"__count": 3, "bin_maxbins_25_pdays": 850.0, "bin_maxbins_25_pdays_end": 900.0}]}, {"name": "data_1_child__age_x_domain___count", "values": [{"min": 9, "max": 9740}]}, {"name": "data_2_child__balance_x_domain___count", "values": [{"min": 1, "max": 38598}]}, {"name": "data_3_child__day_x_domain___count", "values": [{"min": 322, "max": 4778}]}, {"name": "data_4_child__duration_x_domain___count", "values": [{"min": 1, "max": 24752}]}, {"name": "data_5_child__campaign_x_domain___count", "values": [{"min": 1, "max": 39092}]}, {"name": "data_6_child__pdays_x_domain___count", "values": [{"min": 3, "max": 36954}]}, {"name": "data_0_child__previous_x_domain___count", "values": [{"min": 1, "max": 45148}]}], "signals": [{"name": "child__day_bin_maxbins_25_day_bins", "value": {"fields": ["day"], "fname": "bin_day", "start": 0.0, "step": 2.0, "stop": 32.0}}, {"name": "child__balance_bin_maxbins_25_balance_bins", "value": {"fields": ["balance"], "fname": "bin_balance", "start": -10000.0, "step": 5000.0, "stop": 105000.0}}, {"name": "child__campaign_bin_maxbins_25_campaign_bins", "value": {"fields": ["campaign"], "fname": "bin_campaign", "start": 0.0, "step": 5.0, "stop": 65.0}}, {"name": "child__pdays_bin_maxbins_25_pdays_bins", "value": {"fields": ["pdays"], "fname": "bin_pdays", "start": -50.0, "step": 50.0, "stop": 900.0}}, {"name": "child__age_bin_maxbins_25_age_bins", "value": {"fields": ["age"], "fname": "bin_age", "start": 15.0, "step": 5.0, "stop": 95.0}}, {"name": "child__previous_bin_maxbins_25_previous_bins", "value": {"fields": ["previous"], "fname": "bin_previous", "start": 0.0, "step": 20.0, "stop": 280.0}}, {"name": "child__duration_bin_maxbins_25_duration_bins", "value": {"fields": ["duration"], "fname": "bin_duration", "start": 0.0, "step": 200.0, "stop": 5000.0}}, {"name": "childWidth", "value": 300}, {"name": "childHeight", "value": 300}], "marks": [{"type": "group", "name": "child__age_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "child__age_marks", "from": {"data": "data_1"}, "encode": {"update": {"y2": {"field": "bin_maxbins_25_age", "scale": "child__age_y", "offset": {"signal": "0.5 + (abs(scale(\"child__age_y\", datum[\"bin_maxbins_25_age_end\"]) - scale(\"child__age_y\", datum[\"bin_maxbins_25_age\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__age_y\", datum[\"bin_maxbins_25_age_end\"]) - scale(\"child__age_y\", datum[\"bin_maxbins_25_age\"])))) : -0.5)"}}, "ariaRoleDescription": {"value": "bar"}, "y": {"field": "bin_maxbins_25_age_end", "scale": "child__age_y", "offset": {"signal": "0.5 + (abs(scale(\"child__age_y\", datum[\"bin_maxbins_25_age_end\"]) - scale(\"child__age_y\", datum[\"bin_maxbins_25_age\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__age_y\", datum[\"bin_maxbins_25_age_end\"]) - scale(\"child__age_y\", datum[\"bin_maxbins_25_age\"])))) : 0.5)"}}, "x2": {"value": 0, "scale": "child__age_x"}, "x": {"field": "__count", "scale": "child__age_x"}, "fill": {"value": "#4c78a8"}, "opacity": {"value": 0.9}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; age (binned): \" + (!isValid(datum[\"bin_maxbins_25_age\"]) || !isFinite(+datum[\"bin_maxbins_25_age\"]) ? \"null\" : format(datum[\"bin_maxbins_25_age\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_age_end\"], \"\"))"}}}, "style": ["bar"]}], "axes": [{"scale": "child__age_x", "domain": false, "ticks": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "labels": false, "maxExtent": 0, "grid": true, "minExtent": 0, "zindex": 0, "orient": "bottom", "aria": false, "gridScale": "child__age_y"}, {"scale": "child__age_x", "tickCount": {"signal": "ceil(childWidth/40)"}, "grid": false, "title": "Count", "labelFlush": true, "labelOverlap": true, "orient": "bottom", "zindex": 0}, {"scale": "child__age_y", "labelOverlap": true, "tickCount": {"signal": "ceil(childHeight/10)"}, "orient": "left", "zindex": 0, "title": "age (binned)", "grid": false}], "style": "cell"}, {"type": "group", "name": "child__balance_group", "encode": {"update": {"height": {"signal": "childHeight"}, "width": {"signal": "childWidth"}}}, "marks": [{"type": "rect", "name": "child__balance_marks", "from": {"data": "data_2"}, "encode": {"update": {"y2": {"field": "bin_maxbins_25_balance", "scale": "child__balance_y", "offset": {"signal": "0.5 + (abs(scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance_end\"]) - scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance_end\"]) - scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance\"])))) : -0.5)"}}, "fill": {"value": "#4c78a8"}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; balance (binned): \" + (!isValid(datum[\"bin_maxbins_25_balance\"]) || !isFinite(+datum[\"bin_maxbins_25_balance\"]) ? \"null\" : format(datum[\"bin_maxbins_25_balance\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_balance_end\"], \"\"))"}, "x": {"field": "__count", "scale": "child__balance_x"}, "x2": {"value": 0, "scale": "child__balance_x"}, "ariaRoleDescription": {"value": "bar"}, "y": {"field": "bin_maxbins_25_balance_end", "scale": "child__balance_y", "offset": {"signal": "0.5 + (abs(scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance_end\"]) - scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance_end\"]) - scale(\"child__balance_y\", datum[\"bin_maxbins_25_balance\"])))) : 0.5)"}}, "opacity": {"value": 0.9}}}, "style": ["bar"]}], "axes": [{"scale": "child__balance_x", "grid": true, "gridScale": "child__balance_y", "maxExtent": 0, "ticks": false, "domain": false, "minExtent": 0, "aria": false, "orient": "bottom", "labels": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0}, {"scale": "child__balance_x", "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "title": "Count", "grid": false, "labelFlush": true, "orient": "bottom", "labelOverlap": true}, {"scale": "child__balance_y", "grid": false, "labelOverlap": true, "tickCount": {"signal": "ceil(childHeight/10)"}, "zindex": 0, "orient": "left", "title": "balance (binned)"}], "style": "cell"}, {"type": "group", "name": "child__day_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "child__day_marks", "from": {"data": "data_3"}, "encode": {"update": {"y2": {"field": "bin_maxbins_25_day", "scale": "child__day_y", "offset": {"signal": "0.5 + (abs(scale(\"child__day_y\", datum[\"bin_maxbins_25_day_end\"]) - scale(\"child__day_y\", datum[\"bin_maxbins_25_day\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__day_y\", datum[\"bin_maxbins_25_day_end\"]) - scale(\"child__day_y\", datum[\"bin_maxbins_25_day\"])))) : -0.5)"}}, "opacity": {"value": 0.9}, "fill": {"value": "#4c78a8"}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; day (binned): \" + (!isValid(datum[\"bin_maxbins_25_day\"]) || !isFinite(+datum[\"bin_maxbins_25_day\"]) ? \"null\" : format(datum[\"bin_maxbins_25_day\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_day_end\"], \"\"))"}, "x": {"field": "__count", "scale": "child__day_x"}, "ariaRoleDescription": {"value": "bar"}, "x2": {"value": 0, "scale": "child__day_x"}, "y": {"field": "bin_maxbins_25_day_end", "scale": "child__day_y", "offset": {"signal": "0.5 + (abs(scale(\"child__day_y\", datum[\"bin_maxbins_25_day_end\"]) - scale(\"child__day_y\", datum[\"bin_maxbins_25_day\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__day_y\", datum[\"bin_maxbins_25_day_end\"]) - scale(\"child__day_y\", datum[\"bin_maxbins_25_day\"])))) : 0.5)"}}}}, "style": ["bar"]}], "axes": [{"scale": "child__day_x", "gridScale": "child__day_y", "grid": true, "aria": false, "orient": "bottom", "tickCount": {"signal": "ceil(childWidth/40)"}, "maxExtent": 0, "minExtent": 0, "ticks": false, "labels": false, "zindex": 0, "domain": false}, {"scale": "child__day_x", "title": "Count", "orient": "bottom", "labelOverlap": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "grid": false, "labelFlush": true}, {"scale": "child__day_y", "tickCount": {"signal": "ceil(childHeight/10)"}, "orient": "left", "grid": false, "zindex": 0, "labelOverlap": true, "title": "day (binned)"}], "style": "cell"}, {"type": "group", "name": "child__duration_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "child__duration_marks", "from": {"data": "data_4"}, "encode": {"update": {"y": {"field": "bin_maxbins_25_duration_end", "scale": "child__duration_y", "offset": {"signal": "0.5 + (abs(scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration_end\"]) - scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration_end\"]) - scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration\"])))) : 0.5)"}}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; duration (binned): \" + (!isValid(datum[\"bin_maxbins_25_duration\"]) || !isFinite(+datum[\"bin_maxbins_25_duration\"]) ? \"null\" : format(datum[\"bin_maxbins_25_duration\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_duration_end\"], \"\"))"}, "fill": {"value": "#4c78a8"}, "ariaRoleDescription": {"value": "bar"}, "x2": {"value": 0, "scale": "child__duration_x"}, "opacity": {"value": 0.9}, "x": {"field": "__count", "scale": "child__duration_x"}, "y2": {"field": "bin_maxbins_25_duration", "scale": "child__duration_y", "offset": {"signal": "0.5 + (abs(scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration_end\"]) - scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration_end\"]) - scale(\"child__duration_y\", datum[\"bin_maxbins_25_duration\"])))) : -0.5)"}}}}, "style": ["bar"]}], "axes": [{"scale": "child__duration_x", "grid": true, "orient": "bottom", "aria": false, "domain": false, "maxExtent": 0, "ticks": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "gridScale": "child__duration_y", "minExtent": 0, "labels": false, "zindex": 0}, {"scale": "child__duration_x", "grid": false, "labelFlush": true, "labelOverlap": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "title": "Count", "orient": "bottom"}, {"scale": "child__duration_y", "orient": "left", "title": "duration (binned)", "labelOverlap": true, "grid": false, "tickCount": {"signal": "ceil(childHeight/10)"}, "zindex": 0}], "style": "cell"}, {"type": "group", "name": "child__campaign_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "child__campaign_marks", "from": {"data": "data_5"}, "encode": {"update": {"y": {"field": "bin_maxbins_25_campaign_end", "scale": "child__campaign_y", "offset": {"signal": "0.5 + (abs(scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign_end\"]) - scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign_end\"]) - scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign\"])))) : 0.5)"}}, "x2": {"value": 0, "scale": "child__campaign_x"}, "y2": {"field": "bin_maxbins_25_campaign", "scale": "child__campaign_y", "offset": {"signal": "0.5 + (abs(scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign_end\"]) - scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign_end\"]) - scale(\"child__campaign_y\", datum[\"bin_maxbins_25_campaign\"])))) : -0.5)"}}, "opacity": {"value": 0.9}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; campaign (binned): \" + (!isValid(datum[\"bin_maxbins_25_campaign\"]) || !isFinite(+datum[\"bin_maxbins_25_campaign\"]) ? \"null\" : format(datum[\"bin_maxbins_25_campaign\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_campaign_end\"], \"\"))"}, "ariaRoleDescription": {"value": "bar"}, "x": {"field": "__count", "scale": "child__campaign_x"}, "fill": {"value": "#4c78a8"}}}, "style": ["bar"]}], "axes": [{"scale": "child__campaign_x", "tickCount": {"signal": "ceil(childWidth/40)"}, "labels": false, "grid": true, "domain": false, "maxExtent": 0, "minExtent": 0, "gridScale": "child__campaign_y", "ticks": false, "aria": false, "orient": "bottom", "zindex": 0}, {"scale": "child__campaign_x", "grid": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "labelFlush": true, "orient": "bottom", "title": "Count", "labelOverlap": true}, {"scale": "child__campaign_y", "zindex": 0, "labelOverlap": true, "tickCount": {"signal": "ceil(childHeight/10)"}, "orient": "left", "title": "campaign (binned)", "grid": false}], "style": "cell"}, {"type": "group", "name": "child__pdays_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "child__pdays_marks", "from": {"data": "data_6"}, "encode": {"update": {"description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; pdays (binned): \" + (!isValid(datum[\"bin_maxbins_25_pdays\"]) || !isFinite(+datum[\"bin_maxbins_25_pdays\"]) ? \"null\" : format(datum[\"bin_maxbins_25_pdays\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_pdays_end\"], \"\"))"}, "y2": {"field": "bin_maxbins_25_pdays", "scale": "child__pdays_y", "offset": {"signal": "0.5 + (abs(scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays_end\"]) - scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays_end\"]) - scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays\"])))) : -0.5)"}}, "fill": {"value": "#4c78a8"}, "y": {"field": "bin_maxbins_25_pdays_end", "scale": "child__pdays_y", "offset": {"signal": "0.5 + (abs(scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays_end\"]) - scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays_end\"]) - scale(\"child__pdays_y\", datum[\"bin_maxbins_25_pdays\"])))) : 0.5)"}}, "x": {"field": "__count", "scale": "child__pdays_x"}, "opacity": {"value": 0.9}, "ariaRoleDescription": {"value": "bar"}, "x2": {"value": 0, "scale": "child__pdays_x"}}}, "style": ["bar"]}], "axes": [{"scale": "child__pdays_x", "aria": false, "ticks": false, "minExtent": 0, "gridScale": "child__pdays_y", "orient": "bottom", "tickCount": {"signal": "ceil(childWidth/40)"}, "domain": false, "labels": false, "grid": true, "maxExtent": 0, "zindex": 0}, {"scale": "child__pdays_x", "labelOverlap": true, "zindex": 0, "grid": false, "tickCount": {"signal": "ceil(childWidth/40)"}, "title": "Count", "orient": "bottom", "labelFlush": true}, {"scale": "child__pdays_y", "tickCount": {"signal": "ceil(childHeight/10)"}, "title": "pdays (binned)", "zindex": 0, "orient": "left", "grid": false, "labelOverlap": true}], "style": "cell"}, {"type": "group", "name": "child__previous_group", "encode": {"update": {"width": {"signal": "childWidth"}, "height": {"signal": "childHeight"}}}, "marks": [{"type": "rect", "name": "child__previous_marks", "from": {"data": "data_0"}, "encode": {"update": {"y2": {"field": "bin_maxbins_25_previous", "scale": "child__previous_y", "offset": {"signal": "0.5 + (abs(scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous_end\"]) - scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous\"])) < 0.25 ? 0.5 * (0.25 - (abs(scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous_end\"]) - scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous\"])))) : -0.5)"}}, "x2": {"value": 0, "scale": "child__previous_x"}, "y": {"field": "bin_maxbins_25_previous_end", "scale": "child__previous_y", "offset": {"signal": "0.5 + (abs(scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous_end\"]) - scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous\"])) < 0.25 ? -0.5 * (0.25 - (abs(scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous_end\"]) - scale(\"child__previous_y\", datum[\"bin_maxbins_25_previous\"])))) : 0.5)"}}, "description": {"signal": "\"Count: \" + (format(datum[\"__count\"], \"\")) + \"; previous (binned): \" + (!isValid(datum[\"bin_maxbins_25_previous\"]) || !isFinite(+datum[\"bin_maxbins_25_previous\"]) ? \"null\" : format(datum[\"bin_maxbins_25_previous\"], \"\") + \" \u2013 \" + format(datum[\"bin_maxbins_25_previous_end\"], \"\"))"}, "ariaRoleDescription": {"value": "bar"}, "fill": {"value": "#4c78a8"}, "opacity": {"value": 0.9}, "x": {"field": "__count", "scale": "child__previous_x"}}}, "style": ["bar"]}], "axes": [{"scale": "child__previous_x", "ticks": false, "grid": true, "maxExtent": 0, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0, "aria": false, "minExtent": 0, "gridScale": "child__previous_y", "domain": false, "labels": false, "orient": "bottom"}, {"scale": "child__previous_x", "grid": false, "title": "Count", "orient": "bottom", "labelFlush": true, "labelOverlap": true, "tickCount": {"signal": "ceil(childWidth/40)"}, "zindex": 0}, {"scale": "child__previous_y", "tickCount": {"signal": "ceil(childHeight/10)"}, "orient": "left", "labelOverlap": true, "grid": false, "zindex": 0, "title": "previous (binned)"}], "style": "cell"}], "scales": [{"name": "child__age_x", "type": "linear", "domain": [{"signal": "(data(\"data_1_child__age_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_1_child__age_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__age_y", "type": "linear", "domain": {"signal": "[child__age_bin_maxbins_25_age_bins.start, child__age_bin_maxbins_25_age_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__age_bin_maxbins_25_age_bins"}, "zero": false}, {"name": "child__balance_x", "type": "linear", "domain": [{"signal": "(data(\"data_2_child__balance_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_2_child__balance_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__balance_y", "type": "linear", "domain": {"signal": "[child__balance_bin_maxbins_25_balance_bins.start, child__balance_bin_maxbins_25_balance_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__balance_bin_maxbins_25_balance_bins"}, "zero": false}, {"name": "child__day_x", "type": "linear", "domain": [{"signal": "(data(\"data_3_child__day_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_3_child__day_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "zero": true, "nice": true}, {"name": "child__day_y", "type": "linear", "domain": {"signal": "[child__day_bin_maxbins_25_day_bins.start, child__day_bin_maxbins_25_day_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__day_bin_maxbins_25_day_bins"}, "zero": false}, {"name": "child__duration_x", "type": "linear", "domain": [{"signal": "(data(\"data_4_child__duration_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_4_child__duration_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "zero": true, "nice": true}, {"name": "child__duration_y", "type": "linear", "domain": {"signal": "[child__duration_bin_maxbins_25_duration_bins.start, child__duration_bin_maxbins_25_duration_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__duration_bin_maxbins_25_duration_bins"}, "zero": false}, {"name": "child__campaign_x", "type": "linear", "domain": [{"signal": "(data(\"data_5_child__campaign_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_5_child__campaign_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__campaign_y", "type": "linear", "domain": {"signal": "[child__campaign_bin_maxbins_25_campaign_bins.start, child__campaign_bin_maxbins_25_campaign_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__campaign_bin_maxbins_25_campaign_bins"}, "zero": false}, {"name": "child__pdays_x", "type": "linear", "domain": [{"signal": "(data(\"data_6_child__pdays_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_6_child__pdays_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "zero": true, "nice": true}, {"name": "child__pdays_y", "type": "linear", "domain": {"signal": "[child__pdays_bin_maxbins_25_pdays_bins.start, child__pdays_bin_maxbins_25_pdays_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__pdays_bin_maxbins_25_pdays_bins"}, "zero": false}, {"name": "child__previous_x", "type": "linear", "domain": [{"signal": "(data(\"data_0_child__previous_x_domain___count\")[0] || {}).min"}, {"signal": "(data(\"data_0_child__previous_x_domain___count\")[0] || {}).max"}], "range": [0, {"signal": "childWidth"}], "nice": true, "zero": true}, {"name": "child__previous_y", "type": "linear", "domain": {"signal": "[child__previous_bin_maxbins_25_previous_bins.start, child__previous_bin_maxbins_25_previous_bins.stop]"}, "range": [{"signal": "childHeight"}, 0], "bins": {"signal": "child__previous_bin_maxbins_25_previous_bins"}, "zero": false}], "background": "white", "padding": 5, "layout": {"padding": 20, "columns": 2, "bounds": "full", "align": "all"}}, {"mode": "vega"});
</script></div><div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(None, None)
</pre></div>
</div>
</div>
</div>
<figure class="align-default" id="numerical-features-distribution">
<a class="reference internal image-reference" href="_images/numerical_dist_by_feat.png"><img alt="_images/numerical_dist_by_feat.png" src="_images/numerical_dist_by_feat.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Distribution of all the numerical features after feature selection</span><a class="headerlink" href="#numerical-features-distribution" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="categorical-features-distribution">
<a class="reference internal image-reference" href="_images/categorical_dist_by_feat.png"><img alt="_images/categorical_dist_by_feat.png" src="_images/categorical_dist_by_feat.png" style="width: 800px;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">Distribution of all the categorical features after feature selection</span><a class="headerlink" href="#categorical-features-distribution" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="preprocessing">
<h2>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this heading">#</a></h2>
<div class="alert alert-info">
<ul class="simple">
<li><p>Since there is no missing values in our dataset, we don’t need to do imputation or drop NAs.</p></li>
<li><p>We are going to drop “contact”, “day” and “month” column here since they are not helping us in identifying useful underlying pattern in the model.</p></li>
<li><p>We take “age”, “balance”, “duration”, “campaign”, “pdays”, “previous” as numerical features and we are doing StandardScaler transformation on them.</p></li>
<li><p>We take “job”, “marital”, “education”, “default”, “housing”, “loan”, “poutcome” as categorical features and we are doing one hot encoding on them. We dropped columns only if the categorical is binary.</p></li>
</ul>
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lists of feature names</span>
<span class="n">numerical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="s2">&quot;balance&quot;</span><span class="p">,</span> <span class="s2">&quot;duration&quot;</span><span class="p">,</span> <span class="s2">&quot;campaign&quot;</span><span class="p">,</span> <span class="s2">&quot;pdays&quot;</span><span class="p">,</span> <span class="s2">&quot;previous&quot;</span><span class="p">]</span>
<span class="n">categorical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;job&quot;</span><span class="p">,</span> <span class="s2">&quot;marital&quot;</span><span class="p">,</span> <span class="s2">&quot;education&quot;</span><span class="p">,</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="s2">&quot;housing&quot;</span><span class="p">,</span> <span class="s2">&quot;loan&quot;</span><span class="p">,</span> <span class="s2">&quot;poutcome&quot;</span><span class="p">]</span>
<span class="n">drop_features</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;contact&quot;</span><span class="p">,</span> <span class="s2">&quot;day&quot;</span><span class="p">,</span> <span class="s2">&quot;month&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Display the transformed X_train</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="model-selection">
<h2>Model Selection<a class="headerlink" href="#model-selection" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Base Model: Dummy Classifier</span>
<span class="n">classification_metrics</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;accuracy&quot;</span><span class="p">,</span> <span class="s2">&quot;precision&quot;</span><span class="p">,</span> <span class="s2">&quot;recall&quot;</span><span class="p">,</span> <span class="s2">&quot;f1&quot;</span><span class="p">]</span>
<span class="n">dc</span> <span class="o">=</span> <span class="n">DummyClassifier</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;most_frequent&quot;</span><span class="p">)</span>
<span class="n">pipe_dc</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">,</span> <span class="n">dc</span><span class="p">)</span>
<span class="c1"># The mean and std of the cross validated scores for all metrics as a dataframe</span>
<span class="n">cross_val_results</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">scoring</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;accuracy&quot;</span><span class="p">:</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">,</span>
    <span class="s1">&#39;precision&#39;</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">precision_score</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="n">zero_division</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
    <span class="s1">&#39;recall&#39;</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">recall_score</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">),</span>
    <span class="s1">&#39;f1&#39;</span><span class="p">:</span> <span class="n">make_scorer</span><span class="p">(</span><span class="n">f1_score</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">)</span>
<span class="p">}</span>  <span class="c1"># scoring can be a string, a list, or a dictionary</span>

<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;dummy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">cross_validate</span><span class="p">(</span><span class="n">pipe_dc</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">return_train_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Show the train and validation scores</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;dummy&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fit_time</th>
      <td>0.061</td>
      <td>0.015</td>
    </tr>
    <tr>
      <th>score_time</th>
      <td>0.092</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>test_accuracy</th>
      <td>0.883</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>train_accuracy</th>
      <td>0.883</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>test_precision</th>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>train_precision</th>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>test_recall</th>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>train_recall</th>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>test_f1</th>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>train_f1</th>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 2. Logistic regression</span>

<span class="c1"># The logreg model pipeline</span>
<span class="n">logreg</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">,</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">))</span>

<span class="c1"># The mean and std of the cross validated scores for all metrics as a dataframe</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;logreg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">cross_validate</span><span class="p">(</span><span class="n">logreg</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">return_train_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Show the train and validation scores</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;logreg&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fit_time</th>
      <td>0.806</td>
      <td>0.189</td>
    </tr>
    <tr>
      <th>score_time</th>
      <td>0.166</td>
      <td>0.028</td>
    </tr>
    <tr>
      <th>test_accuracy</th>
      <td>0.900</td>
      <td>0.003</td>
    </tr>
    <tr>
      <th>train_accuracy</th>
      <td>0.900</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>test_precision</th>
      <td>0.652</td>
      <td>0.029</td>
    </tr>
    <tr>
      <th>train_precision</th>
      <td>0.655</td>
      <td>0.006</td>
    </tr>
    <tr>
      <th>test_recall</th>
      <td>0.313</td>
      <td>0.019</td>
    </tr>
    <tr>
      <th>train_recall</th>
      <td>0.315</td>
      <td>0.009</td>
    </tr>
    <tr>
      <th>test_f1</th>
      <td>0.423</td>
      <td>0.023</td>
    </tr>
    <tr>
      <th>train_f1</th>
      <td>0.425</td>
      <td>0.009</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3. Support vector classifier</span>

<span class="c1"># The svc model pipeline</span>
<span class="n">svc</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">,</span> <span class="n">SVC</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">))</span>

<span class="c1"># The mean and std of the cross validated scores for all metrics as a dataframe</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;svc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">cross_validate</span><span class="p">(</span><span class="n">svc</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">return_train_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="c1"># Show the train and validation scores</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;svc&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fit_time</th>
      <td>6.465</td>
      <td>0.129</td>
    </tr>
    <tr>
      <th>score_time</th>
      <td>2.441</td>
      <td>0.058</td>
    </tr>
    <tr>
      <th>test_accuracy</th>
      <td>0.899</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>train_accuracy</th>
      <td>0.907</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>test_precision</th>
      <td>0.655</td>
      <td>0.016</td>
    </tr>
    <tr>
      <th>train_precision</th>
      <td>0.726</td>
      <td>0.007</td>
    </tr>
    <tr>
      <th>test_recall</th>
      <td>0.288</td>
      <td>0.008</td>
    </tr>
    <tr>
      <th>train_recall</th>
      <td>0.326</td>
      <td>0.007</td>
    </tr>
    <tr>
      <th>test_f1</th>
      <td>0.400</td>
      <td>0.010</td>
    </tr>
    <tr>
      <th>train_f1</th>
      <td>0.450</td>
      <td>0.007</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 4. Balanced logistic regression</span>
<span class="n">logreg_bal</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">,</span> 
                           <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> 
                                              <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> 
                                              <span class="n">class_weight</span><span class="o">=</span><span class="s2">&quot;balanced&quot;</span><span class="p">))</span>

<span class="c1"># The mean and std of the cross validated scores for all metrics as a dataframe</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;logreg_bal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">cross_validate</span><span class="p">(</span><span class="n">logreg_bal</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">return_train_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Show the train and validation scores</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;logreg_bal&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fit_time</th>
      <td>0.894</td>
      <td>0.197</td>
    </tr>
    <tr>
      <th>score_time</th>
      <td>0.195</td>
      <td>0.050</td>
    </tr>
    <tr>
      <th>test_accuracy</th>
      <td>0.829</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>train_accuracy</th>
      <td>0.829</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>test_precision</th>
      <td>0.386</td>
      <td>0.005</td>
    </tr>
    <tr>
      <th>train_precision</th>
      <td>0.386</td>
      <td>0.003</td>
    </tr>
    <tr>
      <th>test_recall</th>
      <td>0.777</td>
      <td>0.012</td>
    </tr>
    <tr>
      <th>train_recall</th>
      <td>0.778</td>
      <td>0.002</td>
    </tr>
    <tr>
      <th>test_f1</th>
      <td>0.516</td>
      <td>0.006</td>
    </tr>
    <tr>
      <th>train_f1</th>
      <td>0.516</td>
      <td>0.003</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 5. Balanced support vector classifier</span>
<span class="n">svc_bal</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">preprocessor</span><span class="p">,</span> <span class="n">SVC</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s2">&quot;balanced&quot;</span><span class="p">))</span>

<span class="c1"># The mean and std of the cross validated scores for all metrics as a dataframe</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;svc_bal&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">cross_validate</span><span class="p">(</span><span class="n">svc_bal</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">return_train_score</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="n">scoring</span><span class="p">))</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># Show the train and validation scores</span>
<span class="n">cross_val_results</span><span class="p">[</span><span class="s1">&#39;svc_bal&#39;</span><span class="p">]</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mean</th>
      <th>std</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>fit_time</th>
      <td>11.606</td>
      <td>0.144</td>
    </tr>
    <tr>
      <th>score_time</th>
      <td>4.384</td>
      <td>0.028</td>
    </tr>
    <tr>
      <th>test_accuracy</th>
      <td>0.814</td>
      <td>0.006</td>
    </tr>
    <tr>
      <th>train_accuracy</th>
      <td>0.825</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>test_precision</th>
      <td>0.368</td>
      <td>0.010</td>
    </tr>
    <tr>
      <th>train_precision</th>
      <td>0.388</td>
      <td>0.001</td>
    </tr>
    <tr>
      <th>test_recall</th>
      <td>0.821</td>
      <td>0.011</td>
    </tr>
    <tr>
      <th>train_recall</th>
      <td>0.864</td>
      <td>0.004</td>
    </tr>
    <tr>
      <th>test_f1</th>
      <td>0.508</td>
      <td>0.011</td>
    </tr>
    <tr>
      <th>train_f1</th>
      <td>0.535</td>
      <td>0.001</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Compare the average scores of all the models</span>
<span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="n">cross_val_results</span><span class="p">,</span>
    <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span>
    <span class="s1">&#39;mean&#39;</span><span class="p">,</span>
    <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;columns&#39;</span><span class="p">,</span>
    
    <span class="n">level</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="n">precision</span><span class="o">=</span><span class="mi">2</span>
<span class="p">)</span><span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span>
    <span class="n">axis</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_2e357_row0_col0 {
  background-color: #fef6fb;
  color: #000000;
}
#T_2e357_row0_col1, #T_2e357_row2_col4, #T_2e357_row6_col3, #T_2e357_row7_col3 {
  background-color: #f5eef6;
  color: #000000;
}
#T_2e357_row0_col2 {
  background-color: #589ec8;
  color: #f1f1f1;
}
#T_2e357_row0_col3, #T_2e357_row2_col0, #T_2e357_row2_col1, #T_2e357_row2_col2, #T_2e357_row3_col0, #T_2e357_row3_col1, #T_2e357_row7_col4 {
  background-color: #f4edf6;
  color: #000000;
}
#T_2e357_row0_col4 {
  background-color: #023858;
  color: #f1f1f1;
}
#T_2e357_row1_col0 {
  background-color: #fef6fa;
  color: #000000;
}
#T_2e357_row1_col1, #T_2e357_row1_col3 {
  background-color: #fdf5fa;
  color: #000000;
}
#T_2e357_row1_col2 {
  background-color: #d9d8ea;
  color: #000000;
}
#T_2e357_row1_col4 {
  background-color: #a5bddb;
  color: #000000;
}
#T_2e357_row2_col3, #T_2e357_row3_col3, #T_2e357_row3_col4, #T_2e357_row6_col4 {
  background-color: #f4eef6;
  color: #000000;
}
#T_2e357_row3_col2 {
  background-color: #f3edf5;
  color: #000000;
}
#T_2e357_row4_col0, #T_2e357_row5_col0, #T_2e357_row6_col0, #T_2e357_row7_col0, #T_2e357_row8_col0, #T_2e357_row9_col0 {
  background-color: #fff7fb;
  color: #000000;
}
#T_2e357_row4_col1, #T_2e357_row4_col2, #T_2e357_row5_col1 {
  background-color: #f7f0f7;
  color: #000000;
}
#T_2e357_row4_col3, #T_2e357_row4_col4, #T_2e357_row5_col3, #T_2e357_row5_col4, #T_2e357_row8_col2 {
  background-color: #faf3f9;
  color: #000000;
}
#T_2e357_row5_col2 {
  background-color: #f5eff6;
  color: #000000;
}
#T_2e357_row6_col1, #T_2e357_row6_col2, #T_2e357_row7_col1 {
  background-color: #fbf4f9;
  color: #000000;
}
#T_2e357_row7_col2 {
  background-color: #fbf3f9;
  color: #000000;
}
#T_2e357_row8_col1, #T_2e357_row9_col1, #T_2e357_row9_col2 {
  background-color: #faf2f8;
  color: #000000;
}
#T_2e357_row8_col3, #T_2e357_row8_col4, #T_2e357_row9_col3, #T_2e357_row9_col4 {
  background-color: #f8f1f8;
  color: #000000;
}
</style>
<table id="T_2e357">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_2e357_level0_col0" class="col_heading level0 col0" >dummy</th>
      <th id="T_2e357_level0_col1" class="col_heading level0 col1" >logreg</th>
      <th id="T_2e357_level0_col2" class="col_heading level0 col2" >svc</th>
      <th id="T_2e357_level0_col3" class="col_heading level0 col3" >logreg_bal</th>
      <th id="T_2e357_level0_col4" class="col_heading level0 col4" >svc_bal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_2e357_level0_row0" class="row_heading level0 row0" >fit_time</th>
      <td id="T_2e357_row0_col0" class="data row0 col0" >0.06</td>
      <td id="T_2e357_row0_col1" class="data row0 col1" >0.81</td>
      <td id="T_2e357_row0_col2" class="data row0 col2" >6.46</td>
      <td id="T_2e357_row0_col3" class="data row0 col3" >0.89</td>
      <td id="T_2e357_row0_col4" class="data row0 col4" >11.61</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row1" class="row_heading level0 row1" >score_time</th>
      <td id="T_2e357_row1_col0" class="data row1 col0" >0.09</td>
      <td id="T_2e357_row1_col1" class="data row1 col1" >0.17</td>
      <td id="T_2e357_row1_col2" class="data row1 col2" >2.44</td>
      <td id="T_2e357_row1_col3" class="data row1 col3" >0.20</td>
      <td id="T_2e357_row1_col4" class="data row1 col4" >4.38</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row2" class="row_heading level0 row2" >test_accuracy</th>
      <td id="T_2e357_row2_col0" class="data row2 col0" >0.88</td>
      <td id="T_2e357_row2_col1" class="data row2 col1" >0.90</td>
      <td id="T_2e357_row2_col2" class="data row2 col2" >0.90</td>
      <td id="T_2e357_row2_col3" class="data row2 col3" >0.83</td>
      <td id="T_2e357_row2_col4" class="data row2 col4" >0.81</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row3" class="row_heading level0 row3" >train_accuracy</th>
      <td id="T_2e357_row3_col0" class="data row3 col0" >0.88</td>
      <td id="T_2e357_row3_col1" class="data row3 col1" >0.90</td>
      <td id="T_2e357_row3_col2" class="data row3 col2" >0.91</td>
      <td id="T_2e357_row3_col3" class="data row3 col3" >0.83</td>
      <td id="T_2e357_row3_col4" class="data row3 col4" >0.82</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row4" class="row_heading level0 row4" >test_precision</th>
      <td id="T_2e357_row4_col0" class="data row4 col0" >0.00</td>
      <td id="T_2e357_row4_col1" class="data row4 col1" >0.65</td>
      <td id="T_2e357_row4_col2" class="data row4 col2" >0.66</td>
      <td id="T_2e357_row4_col3" class="data row4 col3" >0.39</td>
      <td id="T_2e357_row4_col4" class="data row4 col4" >0.37</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row5" class="row_heading level0 row5" >train_precision</th>
      <td id="T_2e357_row5_col0" class="data row5 col0" >0.00</td>
      <td id="T_2e357_row5_col1" class="data row5 col1" >0.66</td>
      <td id="T_2e357_row5_col2" class="data row5 col2" >0.73</td>
      <td id="T_2e357_row5_col3" class="data row5 col3" >0.39</td>
      <td id="T_2e357_row5_col4" class="data row5 col4" >0.39</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row6" class="row_heading level0 row6" >test_recall</th>
      <td id="T_2e357_row6_col0" class="data row6 col0" >0.00</td>
      <td id="T_2e357_row6_col1" class="data row6 col1" >0.31</td>
      <td id="T_2e357_row6_col2" class="data row6 col2" >0.29</td>
      <td id="T_2e357_row6_col3" class="data row6 col3" >0.78</td>
      <td id="T_2e357_row6_col4" class="data row6 col4" >0.82</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row7" class="row_heading level0 row7" >train_recall</th>
      <td id="T_2e357_row7_col0" class="data row7 col0" >0.00</td>
      <td id="T_2e357_row7_col1" class="data row7 col1" >0.32</td>
      <td id="T_2e357_row7_col2" class="data row7 col2" >0.33</td>
      <td id="T_2e357_row7_col3" class="data row7 col3" >0.78</td>
      <td id="T_2e357_row7_col4" class="data row7 col4" >0.86</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row8" class="row_heading level0 row8" >test_f1</th>
      <td id="T_2e357_row8_col0" class="data row8 col0" >0.00</td>
      <td id="T_2e357_row8_col1" class="data row8 col1" >0.42</td>
      <td id="T_2e357_row8_col2" class="data row8 col2" >0.40</td>
      <td id="T_2e357_row8_col3" class="data row8 col3" >0.52</td>
      <td id="T_2e357_row8_col4" class="data row8 col4" >0.51</td>
    </tr>
    <tr>
      <th id="T_2e357_level0_row9" class="row_heading level0 row9" >train_f1</th>
      <td id="T_2e357_row9_col0" class="data row9 col0" >0.00</td>
      <td id="T_2e357_row9_col1" class="data row9 col1" >0.42</td>
      <td id="T_2e357_row9_col2" class="data row9 col2" >0.45</td>
      <td id="T_2e357_row9_col3" class="data row9 col3" >0.52</td>
      <td id="T_2e357_row9_col4" class="data row9 col4" >0.54</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="alert alert-info">
<p><code class="docutils literal notranslate"><span class="pre">Dummy</span> <span class="pre">Classifier</span></code> has low accuracy and zero precision, recall, and F1 scores, indicating it never predicts the positive class (in this case the client subscribed a term deposit). This is expected as it always predicts the most frequent class.</p>
<p><code class="docutils literal notranslate"><span class="pre">logreg</span></code> shows improved accuracy over the dummy model. However, its recall is low, suggesting it misses a significant number of true positive cases. <code class="docutils literal notranslate"><span class="pre">svc</span></code> performed almost the same as logistic regression model among all metrics.</p>
<p><code class="docutils literal notranslate"><span class="pre">logreg_bal</span></code> and <code class="docutils literal notranslate"><span class="pre">svc_bal</span></code> have lower accuracy compared to their unbalanced counterparts but significantly higher recall. This indicates they are better at identifying positive cases but at the cost of making more false positive errors.</p>
<p>Given the context of our bank marketing data set, we aim to detect the clients who will subscribe a term deposit given the features. Missing a potential “yes” could be more costly than false positives, as it represents a lost opportunity for the sales team to transform this potential customer. Therefore, we chose <code class="docutils literal notranslate"><span class="pre">svc_bal</span></code> as the model has the highest <code class="docutils literal notranslate"><span class="pre">test_recall</span></code> score.</p>
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">svc_bal</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
<span class="n">confmat_svc_bal</span> <span class="o">=</span> <span class="n">ConfusionMatrixDisplay</span><span class="o">.</span><span class="n">from_estimator</span><span class="p">(</span>
    <span class="n">svc_bal</span><span class="p">,</span>
    <span class="n">X_train</span><span class="p">,</span>
    <span class="n">y_train</span><span class="p">,</span>
    <span class="n">values_format</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,)</span> 
<span class="n">confmat_svc_bal</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;sklearn.metrics._plot.confusion_matrix.ConfusionMatrixDisplay at 0x1693c7040&gt;
</pre></div>
</div>
<img alt="_images/2c1d7e37ae3dee5ad6e1b98141fbcd12d96aa166f6bde3118a0b945130e282f1.png" src="_images/2c1d7e37ae3dee5ad6e1b98141fbcd12d96aa166f6bde3118a0b945130e282f1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the scoring_metrics functions function from the src folder</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">src.scoringmetrics</span> <span class="kn">import</span> <span class="n">scoring_metrics</span>
<span class="n">result</span><span class="o">=</span><span class="n">scoring_metrics</span><span class="p">(</span><span class="n">svc_bal</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">)</span>
<span class="n">result</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>train_accuracy</th>
      <th>test_accuracy</th>
      <th>train_precision</th>
      <th>test_precision</th>
      <th>train_recall</th>
      <th>test_recall</th>
      <th>train_f1</th>
      <th>test_f1</th>
      <th>fit_time</th>
      <th>score_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.823822</td>
      <td>0.815659</td>
      <td>0.386556</td>
      <td>0.369435</td>
      <td>0.861531</td>
      <td>0.816462</td>
      <td>0.533665</td>
      <td>0.508694</td>
      <td>19.93594</td>
      <td>32.581755</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="hyperparameter-optimization">
<h2>Hyperparameter Optimization<a class="headerlink" href="#hyperparameter-optimization" title="Permalink to this heading">#</a></h2>
<div class="alert alert-info">
<p>Optimizing hyperparameters in SVC with a smaller sample size of 10,000 instances is a strategy aimed at enhancing computational efficiency. This approach expedites the exploration of hyperparameter possibilities, aiding in the discovery of potential configurations. While the outcomes validate the concept, it’s crucial to recognize and manage the constraints stemming from the smaller dataset size when interpreting the results.</p>
</div><div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Creating a sample of 10000 observations</span>
<span class="n">sample_data</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
<span class="n">train_df_sampled</span><span class="p">,</span> <span class="n">test_df_sampled</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">sample_data</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>

<span class="n">X_train_sampled</span> <span class="o">=</span> <span class="n">train_df_sampled</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">])</span>
<span class="n">X_test_sampled</span> <span class="o">=</span> <span class="n">test_df_sampled</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">])</span>
<span class="n">y_train_sampled</span> <span class="o">=</span> <span class="n">train_df_sampled</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>
<span class="n">y_test_sampled</span> <span class="o">=</span> <span class="n">test_df_sampled</span><span class="p">[</span><span class="s2">&quot;target&quot;</span><span class="p">]</span>

<span class="c1"># Transformation on the sample training data</span>
<span class="n">sample_preprocessor</span> <span class="o">=</span> <span class="n">make_column_transformer</span><span class="p">(</span>
    <span class="p">(</span><span class="n">StandardScaler</span><span class="p">(),</span> <span class="n">numerical_features</span><span class="p">),</span>
    <span class="p">(</span><span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="s2">&quot;if_binary&quot;</span><span class="p">),</span> <span class="n">categorical_features</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;drop&quot;</span><span class="p">,</span> <span class="n">drop_features</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># X_train_sampled_enc = pd.DataFrame(sample_preprocessor.fit_transform(X_train_sampled), index=X_train_sampled.index, columns=new_columns)</span>

<span class="n">svc_bal_sample</span> <span class="o">=</span> <span class="n">make_pipeline</span><span class="p">(</span><span class="n">sample_preprocessor</span><span class="p">,</span> <span class="n">SVC</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">class_weight</span><span class="o">=</span><span class="s2">&quot;balanced&quot;</span><span class="p">))</span>

<span class="n">param_dist</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;svc__C&#39;</span><span class="p">:</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="s1">&#39;svc__gamma&#39;</span><span class="p">:</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
    <span class="s1">&#39;svc__kernel&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;rbf&#39;</span><span class="p">,</span> <span class="s1">&#39;sigmoid&#39;</span><span class="p">,</span> <span class="s1">&#39;linear&#39;</span><span class="p">]</span>
<span class="p">}</span>

<span class="c1"># Perform RandomizedSearchCV for hyperparameter optimization</span>
<span class="n">random_search</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">svc_bal_sample</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span><span class="n">param_dist</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
<span class="n">random_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_sampled</span><span class="p">,</span> <span class="n">y_train_sampled</span><span class="p">)</span>

<span class="c1"># Best hyperparameters</span>
<span class="n">best_params_random</span> <span class="o">=</span> <span class="n">random_search</span><span class="o">.</span><span class="n">best_params_</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Best Hyperparameters (Randomized Search):&quot;</span><span class="p">,</span> <span class="n">best_params_random</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Best Hyperparameters (Randomized Search): {&#39;svc__C&#39;: 4.331064601244609, &#39;svc__gamma&#39;: 0.09907641983846155, &#39;svc__kernel&#39;: &#39;rbf&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">random_search</span><span class="o">.</span><span class="n">cv_results_</span><span class="p">)[</span>
    <span class="p">[</span>
        <span class="s2">&quot;mean_test_score&quot;</span><span class="p">,</span>
        <span class="s2">&quot;param_svc__gamma&quot;</span><span class="p">,</span>
        <span class="s2">&quot;param_svc__C&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mean_fit_time&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rank_test_score&quot;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;rank_test_score&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>rank_test_score</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>3</th>
      <th>3</th>
      <th>3</th>
      <th>7</th>
      <th>7</th>
      <th>9</th>
      <th>10</th>
      <th>...</th>
      <th>16</th>
      <th>17</th>
      <th>18</th>
      <th>19</th>
      <th>20</th>
      <th>21</th>
      <th>22</th>
      <th>23</th>
      <th>24</th>
      <th>25</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>mean_test_score</th>
      <td>0.831875</td>
      <td>0.82775</td>
      <td>0.8275</td>
      <td>0.8275</td>
      <td>0.8275</td>
      <td>0.8275</td>
      <td>0.827375</td>
      <td>0.827375</td>
      <td>0.825</td>
      <td>0.82125</td>
      <td>...</td>
      <td>0.819</td>
      <td>0.819</td>
      <td>0.818375</td>
      <td>0.76425</td>
      <td>0.742125</td>
      <td>0.73775</td>
      <td>0.732375</td>
      <td>0.730375</td>
      <td>0.71675</td>
      <td>0.714125</td>
    </tr>
    <tr>
      <th>param_svc__gamma</th>
      <td>0.099076</td>
      <td>0.008709</td>
      <td>0.044086</td>
      <td>0.073905</td>
      <td>0.069326</td>
      <td>0.018537</td>
      <td>0.072915</td>
      <td>0.012562</td>
      <td>0.067931</td>
      <td>0.054183</td>
      <td>...</td>
      <td>0.044342</td>
      <td>0.040804</td>
      <td>0.025367</td>
      <td>0.023826</td>
      <td>0.042702</td>
      <td>0.042721</td>
      <td>0.049303</td>
      <td>0.052176</td>
      <td>0.0776</td>
      <td>0.083634</td>
    </tr>
    <tr>
      <th>param_svc__C</th>
      <td>4.331065</td>
      <td>1.640822</td>
      <td>4.437012</td>
      <td>3.53178</td>
      <td>5.073088</td>
      <td>5.40062</td>
      <td>7.008849</td>
      <td>6.33953</td>
      <td>5.204223</td>
      <td>5.415514</td>
      <td>...</td>
      <td>2.927029</td>
      <td>0.696779</td>
      <td>7.736828</td>
      <td>3.717887</td>
      <td>3.141208</td>
      <td>3.677289</td>
      <td>2.604554</td>
      <td>7.034032</td>
      <td>9.979953</td>
      <td>1.306287</td>
    </tr>
    <tr>
      <th>mean_fit_time</th>
      <td>0.677113</td>
      <td>0.7783</td>
      <td>1.51885</td>
      <td>1.317613</td>
      <td>1.537338</td>
      <td>1.499696</td>
      <td>1.95118</td>
      <td>1.800268</td>
      <td>0.688293</td>
      <td>0.707351</td>
      <td>...</td>
      <td>0.756204</td>
      <td>0.655976</td>
      <td>0.770482</td>
      <td>0.46971</td>
      <td>0.565585</td>
      <td>0.652933</td>
      <td>0.59485</td>
      <td>0.525791</td>
      <td>0.603188</td>
      <td>0.615842</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 25 columns</p>
</div></div></div>
</div>
</section>
<section id="test-results-after-hyperparameter-optimization">
<h2>Test results after hyperparameter optimization<a class="headerlink" href="#test-results-after-hyperparameter-optimization" title="Permalink to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Evaluate the best model on the test set</span>
<span class="n">best_model_random</span> <span class="o">=</span> <span class="n">random_search</span><span class="o">.</span><span class="n">best_estimator_</span>
<span class="n">accuracy_random</span> <span class="o">=</span> <span class="n">best_model_random</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Accuracy on Test Set:&quot;</span><span class="p">,</span> <span class="n">accuracy_random</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Accuracy on Test Set: 0.8613292049098751
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">predictions</span> <span class="o">=</span> <span class="n">best_model_random</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="n">recall</span> <span class="o">=</span> <span class="n">recall_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">predictions</span><span class="p">,</span> <span class="n">pos_label</span><span class="o">=</span><span class="s1">&#39;yes&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Recall on Test Set:&quot;</span><span class="p">,</span> <span class="n">recall</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Recall on Test Set: 0.8751182592242195
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">random_search</span><span class="o">.</span><span class="n">cv_results_</span><span class="p">)</span>

<span class="n">scatter</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">results</span><span class="p">)</span><span class="o">.</span><span class="n">mark_circle</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s1">&#39;param_svc__C:Q&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;param_svc__gamma:Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Color</span><span class="p">(</span><span class="s1">&#39;mean_test_score:Q&#39;</span><span class="p">,</span> 
                    <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                   <span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;C and gamma vs. Mean Test Score&#39;</span>
<span class="p">)</span>

<span class="n">scatter</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
<style>
  #altair-viz-b41ee71375484ddba564c19686e6206a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-b41ee71375484ddba564c19686e6206a.vega-embed details,
  #altair-viz-b41ee71375484ddba564c19686e6206a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-b41ee71375484ddba564c19686e6206a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-b41ee71375484ddba564c19686e6206a") {
      outputDiv = document.getElementById("altair-viz-b41ee71375484ddba564c19686e6206a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.15.1?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.15.1"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"$schema": "https://vega.github.io/schema/vega/v5.json", "data": [{"name": "source_0", "values": [{"mean_test_score": 0.819125, "param_svc__C": 7.064691855978616, "param_svc__gamma": 0.02961393349503795}, {"mean_test_score": 0.827375, "param_svc__C": 7.008848550268617, "param_svc__gamma": 0.0729150310154773}, {"mean_test_score": 0.8318749999999999, "param_svc__C": 4.331064601244609, "param_svc__gamma": 0.09907641983846155}, {"mean_test_score": 0.8202499999999999, "param_svc__C": 5.8969429702261005, "param_svc__gamma": 0.014995076263038455}, {"mean_test_score": 0.8275, "param_svc__C": 3.5317801615086943, "param_svc__gamma": 0.07390497073840417}, {"mean_test_score": 0.819, "param_svc__C": 0.6967789660956835, "param_svc__gamma": 0.04080442553304314}, {"mean_test_score": 0.820875, "param_svc__C": 6.417920176870504, "param_svc__gamma": 0.04502571780640763}, {"mean_test_score": 0.8212499999999998, "param_svc__C": 5.415513738418383, "param_svc__gamma": 0.05418275870968661}, {"mean_test_score": 0.819625, "param_svc__C": 3.077804977404459, "param_svc__gamma": 0.05020847767923423}, {"mean_test_score": 0.7377499999999999, "param_svc__C": 3.677289188090218, "param_svc__gamma": 0.04272099480253377}, {"mean_test_score": 0.76425, "param_svc__C": 3.717886556223141, "param_svc__gamma": 0.023826323087895562}, {"mean_test_score": 0.71675, "param_svc__C": 9.979952865166672, "param_svc__gamma": 0.07759959501929949}, {"mean_test_score": 0.8275, "param_svc__C": 4.437011726795282, "param_svc__gamma": 0.044086276332964386}, {"mean_test_score": 0.82775, "param_svc__C": 1.6408224184684672, "param_svc__gamma": 0.008708648079828329}, {"mean_test_score": 0.7303749999999999, "param_svc__C": 7.034032436025143, "param_svc__gamma": 0.05217633752661696}, {"mean_test_score": 0.827375, "param_svc__C": 6.339529517921111, "param_svc__gamma": 0.012561839507929572}, {"mean_test_score": 0.8275, "param_svc__C": 5.073087863238618, "param_svc__gamma": 0.06932629134230998}, {"mean_test_score": 0.732375, "param_svc__C": 2.604553653965067, "param_svc__gamma": 0.04930342642627044}, {"mean_test_score": 0.819125, "param_svc__C": 2.428359299859786, "param_svc__gamma": 0.04468606627948174}, {"mean_test_score": 0.7141249999999999, "param_svc__C": 1.3062866599032374, "param_svc__gamma": 0.08363408005068333}, {"mean_test_score": 0.8190000000000002, "param_svc__C": 2.9270293433269856, "param_svc__gamma": 0.04434182392266678}, {"mean_test_score": 0.7421249999999999, "param_svc__C": 3.141207890271841, "param_svc__gamma": 0.04270222110247016}, {"mean_test_score": 0.825, "param_svc__C": 5.204223374780111, "param_svc__gamma": 0.06793137829622724}, {"mean_test_score": 0.8275, "param_svc__C": 5.400620111997607, "param_svc__gamma": 0.018537266077991565}, {"mean_test_score": 0.818375, "param_svc__C": 7.736828414433382, "param_svc__gamma": 0.025366637453687405}]}, {"name": "source_0_x_domain_param_svc__C", "values": [{"min": 0.6967789660956835, "max": 9.979952865166672}]}, {"name": "source_0_y_domain_param_svc__gamma", "values": [{"min": 0.008708648079828329, "max": 0.09907641983846155}]}, {"name": "source_0_color_domain_mean_test_score", "values": [{"min": 0.7141249999999999, "max": 0.8318749999999999}]}], "marks": [{"type": "symbol", "name": "marks", "from": {"data": "source_0"}, "encode": {"update": {"description": {"signal": "\"param_svc__C: \" + (format(datum[\"param_svc__C\"], \"\")) + \"; param_svc__gamma: \" + (format(datum[\"param_svc__gamma\"], \"\")) + \"; mean_test_score: \" + (format(datum[\"mean_test_score\"], \"\"))"}, "y": {"field": "param_svc__gamma", "scale": "y"}, "shape": {"value": "circle"}, "fill": {"field": "mean_test_score", "scale": "color"}, "opacity": {"value": 0.7}, "ariaRoleDescription": {"value": "circle"}, "x": {"field": "param_svc__C", "scale": "x"}}}, "style": ["circle"]}], "scales": [{"name": "x", "type": "linear", "domain": [{"signal": "(data(\"source_0_x_domain_param_svc__C\")[0] || {}).min"}, {"signal": "(data(\"source_0_x_domain_param_svc__C\")[0] || {}).max"}], "range": [0, {"signal": "width"}], "nice": true, "zero": true}, {"name": "y", "type": "linear", "domain": [{"signal": "(data(\"source_0_y_domain_param_svc__gamma\")[0] || {}).min"}, {"signal": "(data(\"source_0_y_domain_param_svc__gamma\")[0] || {}).max"}], "range": [{"signal": "height"}, 0], "zero": true, "nice": true}, {"name": "color", "type": "linear", "domain": [{"signal": "(data(\"source_0_color_domain_mean_test_score\")[0] || {}).min"}, {"signal": "(data(\"source_0_color_domain_mean_test_score\")[0] || {}).max"}], "range": {"scheme": "viridis"}, "interpolate": "hcl", "reverse": true, "zero": false}], "axes": [{"scale": "x", "domain": false, "ticks": false, "minExtent": 0, "grid": true, "zindex": 0, "tickCount": {"signal": "ceil(width/40)"}, "maxExtent": 0, "gridScale": "y", "labels": false, "aria": false, "orient": "bottom"}, {"scale": "y", "grid": true, "zindex": 0, "gridScale": "x", "tickCount": {"signal": "ceil(height/40)"}, "labels": false, "domain": false, "maxExtent": 0, "ticks": false, "orient": "left", "minExtent": 0, "aria": false}, {"scale": "x", "zindex": 0, "labelOverlap": true, "labelFlush": true, "grid": false, "orient": "bottom", "title": "param_svc__C", "tickCount": {"signal": "ceil(width/40)"}}, {"scale": "y", "title": "param_svc__gamma", "zindex": 0, "orient": "left", "grid": false, "tickCount": {"signal": "ceil(height/40)"}, "labelOverlap": true}], "title": {"text": "C and gamma vs. Mean Test Score", "frame": "group"}, "width": 400, "legends": [{"fill": "color", "gradientLength": {"signal": "clamp(height, 64, 200)"}, "title": "mean_test_score", "encode": {"gradient": {"update": {"opacity": {"value": 0.7}}}}}], "height": 300, "padding": 5, "style": "cell", "background": "white"}, {"mode": "vega"});
</script></div></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="center-discussions-center">
<h1><center> Discussions </center><a class="headerlink" href="#center-discussions-center" title="Permalink to this heading">#</a></h1>
<section id="key-findings">
<h2>Key Findings<a class="headerlink" href="#key-findings" title="Permalink to this heading">#</a></h2>
<p>In this bank marketing analysis project, we aimed to develop a binary classification model to predict client subscription to term deposits. We tested Logistic Regression and Support Vector Classifier (SVC) models, focusing on recall as a key performance metric. The SVC model outperformed Logistic Regression in recall, and after hyperparameter optimization, it achieved a recall score of 0.875 on the test dataset, which is quite promising!</p>
</section>
<section id="reflection-on-expectations">
<h2>Reflection on Expectations<a class="headerlink" href="#reflection-on-expectations" title="Permalink to this heading">#</a></h2>
<p>The results were somewhat expected, given SVC’s known efficacy in classification tasks, particularly when there’s a clear margin of separation. The high recall score of 0.875 indicates that the model is particularly adept at identifying clients likely to subscribe, which was the primary goal. It’s noteworthy that such a high recall was achieved, as it suggests the model is highly sensitive to true positive cases.</p>
</section>
<section id="impact-of-finding">
<h2>Impact of Finding<a class="headerlink" href="#impact-of-finding" title="Permalink to this heading">#</a></h2>
<p>The high recall score of this model has significant implications for targeted marketing strategies. It suggests that the bank can confidently use the model’s predictions to focus its marketing efforts on clients predicted to subscribe, potentially increasing the efficiency and effectiveness of its campaigns. This targeted approach could lead to higher conversion rates with lower marketing expenses. However, it’s important to balance such a high recall with precision to ensure that the bank doesn’t unnecessarily target unlikely prospects.</p>
</section>
<section id="future-improvements">
<h2>Future Improvements<a class="headerlink" href="#future-improvements" title="Permalink to this heading">#</a></h2>
<p>The success of this model leads to several potential areas for further exploration:</p>
<ul class="simple">
<li><p>Balancing Precision and Recall: Investigating methods to enhance precision without substantially reducing recall.</p></li>
<li><p>Feature Analysis: Identifying which features most significantly influence subscription predictions.
Model Interpretability: Improving the model’s interpretability to better understand the basis for its predictions.</p></li>
<li><p>Temporal Adaptability: Assessing the model’s adaptability to evolving trends and customer behaviors over time.</p></li>
<li><p>Testing Alternative Models: Exploring whether ensemble methods or more advanced machine learning algorithms could yield better or comparable results.</p></li>
<li><p>Customer Segmentation: Evaluating the model’s performance across different customer segments to tailor more specific marketing strategies.</p></li>
</ul>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="center-references-center">
<h1><center> References </center><a class="headerlink" href="#center-references-center" title="Permalink to this heading">#</a></h1>
<p>Moro,S., Rita,P., and Cortez,P., 2012. Bank Marketing. UCI Machine Learning Repository. <a class="reference external" href="https://doi.org/10.24432/C5K306">https://doi.org/10.24432/C5K306</a>”</p>
<p>Timbers,T. , Ostblom,J., and Lee,M., 2023. Breast Cancer Predictor Report. GitHub repository, <a class="github reference external" href="https://github.com/ttimbers/breast_cancer_predictor_py/blob/0.0.1/src/breast_cancer_predictor_report.ipynb">ttimbers/breast_cancer_predictor_py</a>”,</p>
<p>Moro, S., Cortez, P., &amp; Rita, P. (2014). A data-driven approach to predict the success of bank telemarketing. Decis. Support Syst., 62, 22-31.</p>
<p>Alsolami, F.J., Saleem, F., &amp; Al-Ghamdi, A.S. (2020). Predicting the Accuracy for Telemarketing Process in Banks Using Data Mining.</p>
<p>Vajiramedhin, C., &amp; Suebsing, A. (2014). Feature Selection with Data Balancing for Prediction of Bank Telemarketing. Applied mathematical sciences, 8, 5667-5672.</p>
<p>Moura, A.F., Pinho, C.M., Napolitano, D.M., Martins, F.S., &amp; Fornari Junior, J.C. (2020). Optimization of operational costs of Call centers employing classification techniques. Research, Society and Development, 9.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#"><center> Bank Marketing Analysis </center></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-summary-center"><center> Summary </center></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-introduction-center"><center> Introduction </center></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#background">Background</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#research-question">Research Question</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-description">Data Description</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-methods-center"><center>Methods </center></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-results-and-discussion-center"><center>Results and Discussion </center></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploratory-data-analysis">Exploratory Data Analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocessing">Preprocessing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#model-selection">Model Selection</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#hyperparameter-optimization">Hyperparameter Optimization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#test-results-after-hyperparameter-optimization">Test results after hyperparameter optimization</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-discussions-center"><center> Discussions </center></a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#key-findings">Key Findings</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reflection-on-expectations">Reflection on Expectations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#impact-of-finding">Impact of Finding</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#future-improvements">Future Improvements</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#center-references-center"><center> References </center></a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Group 8: Runtian Li, Rafe Chang, Sid Grover, Anu Banga
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>